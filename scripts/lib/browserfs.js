!function(){if(Date.now||(Date.now=function(){return(new Date).getTime()}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var i,a,s=[];for(i in o)t.call(o,i)&&s.push(i);if(e)for(a=0;r>a;a++)t.call(o,n[a])&&s.push(n[a]);return s}}()),"b"!=="ab".substr(-1)&&(String.prototype.substr=function(t){return function(e,n){return 0>e&&(e=this.length+e),t.call(this,e,n)}}(String.prototype.substr)),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var n=0;n<this.length;++n)n in this&&t.call(e,this[n],n,this)}),"undefined"==typeof setImmediate){var t=[],e="zero-timeout-message",n=function(){if(!window.postMessage)return!1;var t=!0,e=window.onmessage;return window.onmessage=function(){t=!1},window.postMessage("","*"),window.onmessage=e,t};if(n()){window.setImmediate=function(n){t.push(n),window.postMessage(e,"*")};var r=function(n){if(n.source===self&&n.data===e&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0,t.length>0)){var r=t.shift();return r()}};window.addEventListener?window.addEventListener("message",r,!0):window.attachEvent("onmessage",r)}else window.setImmediate=function(t){return setTimeout(t,0)}}Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){if("undefined"==typeof e&&(e=0),!this)throw new TypeError;var n=this.length;if(0===n||r>=n)return-1;var r=e;0>r&&(r=n+r);for(var o=r;n>o;o++)if(this[o]===t)return o;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,r;for(n=0,r=this.length;r>n;++n)n in this&&t.call(e,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){var n,r,o;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),a=i.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(e&&(n=e),r=new Array(a),o=0;a>o;){var s,u;o in i&&(s=i[o],u=t.call(n,s,o,i),r[o]=u),o++}return r}),document.write("<!-- IEBinaryToArray_ByteStr -->\r\n<script type='text/vbscript'>\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n Dim lastIndex\r\n lastIndex = LenB(Binary)\r\n if lastIndex mod 2 Then\r\n IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n Else\r\n IEBinaryToArray_ByteStr_Last = \"\"\r\n End If\r\nEnd Function\r\n</script>\r\n");var o,i,a;!function(t){function e(t,e){return S.call(t,e)}function n(t,e){var n,r,o,i,a,s,u,f,c,p,l=e&&e.split("/"),h=v.map,d=h&&h["*"]||{};if(t&&"."===t.charAt(0))if(e){for(l=l.slice(0,l.length-1),t=l.concat(t.split("/")),f=0;f<t.length;f+=1)if(p=t[f],"."===p)t.splice(f,1),f-=1;else if(".."===p){if(1===f&&(".."===t[2]||".."===t[0]))break;f>0&&(t.splice(f-1,2),f-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((l||d)&&h){for(n=t.split("/"),f=n.length;f>0;f-=1){if(r=n.slice(0,f).join("/"),l)for(c=l.length;c>0;c-=1)if(o=h[l.slice(0,c).join("/")],o&&(o=o[r])){i=o,a=f;break}if(i)break;!s&&d&&d[r]&&(s=d[r],u=f)}!i&&s&&(i=s,a=u),i&&(n.splice(0,a,i),t=n.join("/"))}return t}function r(e,n){return function(){return h.apply(t,b.call(arguments,0).concat([e,n]))}}function s(t){return function(e){return n(e,t)}}function u(t){return function(e){w[t]=e}}function f(n){if(e(g,n)){var r=g[n];delete g[n],m[n]=!0,l.apply(t,r)}if(!e(w,n)&&!e(m,n))throw new Error("No "+n);return w[n]}function c(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function p(t){return function(){return v&&v.config&&v.config[t]||{}}}var l,h,d,y,w={},g={},v={},m={},S=Object.prototype.hasOwnProperty,b=[].slice;d=function(t,e){var r,o=c(t),i=o[0];return t=o[1],i&&(i=n(i,e),r=f(i)),i?t=r&&r.normalize?r.normalize(t,s(e)):n(t,e):(t=n(t,e),o=c(t),i=o[0],t=o[1],i&&(r=f(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:r}},y={require:function(t){return r(t)},exports:function(t){var e=w[t];return"undefined"!=typeof e?e:w[t]={}},module:function(t){return{id:t,uri:"",exports:w[t],config:p(t)}}},l=function(n,o,i,a){var s,c,p,l,h,v,S=[],b=typeof i;if(a=a||n,"undefined"===b||"function"===b){for(o=!o.length&&i.length?["require","exports","module"]:o,h=0;h<o.length;h+=1)if(l=d(o[h],a),c=l.f,"require"===c)S[h]=y.require(n);else if("exports"===c)S[h]=y.exports(n),v=!0;else if("module"===c)s=S[h]=y.module(n);else if(e(w,c)||e(g,c)||e(m,c))S[h]=f(c);else{if(!l.p)throw new Error(n+" missing "+c);l.p.load(l.n,r(a,!0),u(c),{}),S[h]=w[c]}p=i?i.apply(w[n],S):void 0,n&&(s&&s.exports!==t&&s.exports!==w[n]?w[n]=s.exports:p===t&&v||(w[n]=p))}else n&&(w[n]=i)},o=i=h=function(e,n,r,o,i){return"string"==typeof e?y[e]?y[e](n):f(d(e,n).f):(e.splice||(v=e,n.splice?(e=n,n=r,r=null):e=t),n=n||function(){},"function"==typeof r&&(r=o,o=i),o?l(t,e,n,r):setTimeout(function(){l(t,e,n,r)},4),h)},h.config=function(t){return v=t,v.deps&&h(v.deps,v.callback),h},o._defined=w,a=function(t,n,r){n.splice||(r=n,n=[]),e(w,t)||e(g,t)||(g[t]=[t,n,r])},a.amd={jQuery:!0}}(),a("../vendor/almond/almond",function(){}),a("core/api_error",["require","exports"],function(t,e){!function(t){t[t.EPERM=0]="EPERM",t[t.ENOENT=1]="ENOENT",t[t.EIO=2]="EIO",t[t.EBADF=3]="EBADF",t[t.EACCES=4]="EACCES",t[t.EBUSY=5]="EBUSY",t[t.EEXIST=6]="EEXIST",t[t.ENOTDIR=7]="ENOTDIR",t[t.EISDIR=8]="EISDIR",t[t.EINVAL=9]="EINVAL",t[t.EFBIG=10]="EFBIG",t[t.ENOSPC=11]="ENOSPC",t[t.EROFS=12]="EROFS",t[t.ENOTEMPTY=13]="ENOTEMPTY",t[t.ENOTSUP=14]="ENOTSUP"}(e.ErrorCode||(e.ErrorCode={}));var n=e.ErrorCode,r={};r[0]="Operation not permitted.",r[1]="No such file or directory.",r[2]="Input/output error.",r[3]="Bad file descriptor.",r[4]="Permission denied.",r[5]="Resource busy.",r[6]="File exists.",r[7]="File is not a directory.",r[8]="File is a directory.",r[9]="Invalid argument.",r[10]="File is too big.",r[11]="No space left on disk.",r[12]="Cannot modify a read-only file system.",r[13]="Directory is not empty.",r[14]="Operation is not supported.";var o=function(){function t(t,e){this.type=t,this.code=n[t],null!=e&&(this.message=e)}return t.prototype.toString=function(){return this.code+": "+r[this.type]+" "+this.message},t}();e.ApiError=o}),a("core/buffer_core",["require","exports","./api_error"],function(t,e,n){var r=Math.pow(2,128),o=-1*r,i=2139095040,a=-8388608,s=2143289344,u=function(){function t(){}return t.prototype.getLength=function(){throw new n.ApiError(14,"BufferCore implementations should implement getLength.")},t.prototype.writeInt8=function(t,e){this.writeUInt8(t,255&e|(2147483648&e)>>>24)},t.prototype.writeInt16LE=function(t,e){this.writeUInt8(t,255&e),this.writeUInt8(t+1,255&e>>>8|(2147483648&e)>>>24)},t.prototype.writeInt16BE=function(t,e){this.writeUInt8(t+1,255&e),this.writeUInt8(t,255&e>>>8|(2147483648&e)>>>24)},t.prototype.writeInt32LE=function(t,e){this.writeUInt8(t,255&e),this.writeUInt8(t+1,255&e>>>8),this.writeUInt8(t+2,255&e>>>16),this.writeUInt8(t+3,255&e>>>24)},t.prototype.writeInt32BE=function(t,e){this.writeUInt8(t+3,255&e),this.writeUInt8(t+2,255&e>>>8),this.writeUInt8(t+1,255&e>>>16),this.writeUInt8(t,255&e>>>24)},t.prototype.writeUInt8=function(){throw new n.ApiError(14,"BufferCore implementations should implement writeUInt8.")},t.prototype.writeUInt16LE=function(t,e){this.writeUInt8(t,255&e),this.writeUInt8(t+1,255&e>>8)},t.prototype.writeUInt16BE=function(t,e){this.writeUInt8(t+1,255&e),this.writeUInt8(t,255&e>>8)},t.prototype.writeUInt32LE=function(t,e){this.writeInt32LE(t,0|e)},t.prototype.writeUInt32BE=function(t,e){this.writeInt32BE(t,0|e)},t.prototype.writeFloatLE=function(t,e){this.writeInt32LE(t,this.float2intbits(e))},t.prototype.writeFloatBE=function(t,e){this.writeInt32BE(t,this.float2intbits(e))},t.prototype.writeDoubleLE=function(t,e){var n=this.double2longbits(e);this.writeInt32LE(t,n[0]),this.writeInt32LE(t+4,n[1])},t.prototype.writeDoubleBE=function(t,e){var n=this.double2longbits(e);this.writeInt32BE(t+4,n[0]),this.writeInt32BE(t,n[1])},t.prototype.readInt8=function(t){var e=this.readUInt8(t);return 128&e?4294967168|e:e},t.prototype.readInt16LE=function(t){var e=this.readUInt16LE(t);return 32768&e?4294934528|e:e},t.prototype.readInt16BE=function(t){var e=this.readUInt16BE(t);return 32768&e?4294934528|e:e},t.prototype.readInt32LE=function(t){return 0|this.readUInt32LE(t)},t.prototype.readInt32BE=function(t){return 0|this.readUInt32BE(t)},t.prototype.readUInt8=function(){throw new n.ApiError(14,"BufferCore implementations should implement readUInt8.")},t.prototype.readUInt16LE=function(t){return this.readUInt8(t+1)<<8|this.readUInt8(t)},t.prototype.readUInt16BE=function(t){return this.readUInt8(t)<<8|this.readUInt8(t+1)},t.prototype.readUInt32LE=function(t){return(this.readUInt8(t+3)<<24|this.readUInt8(t+2)<<16|this.readUInt8(t+1)<<8|this.readUInt8(t))>>>0},t.prototype.readUInt32BE=function(t){return(this.readUInt8(t)<<24|this.readUInt8(t+1)<<16|this.readUInt8(t+2)<<8|this.readUInt8(t+3))>>>0},t.prototype.readFloatLE=function(t){return this.intbits2float(this.readInt32LE(t))},t.prototype.readFloatBE=function(t){return this.intbits2float(this.readInt32BE(t))},t.prototype.readDoubleLE=function(t){return this.longbits2double(this.readInt32LE(t+4),this.readInt32LE(t))},t.prototype.readDoubleBE=function(t){return this.longbits2double(this.readInt32BE(t),this.readInt32BE(t+4))},t.prototype.copy=function(){throw new n.ApiError(14,"BufferCore implementations should implement copy.")},t.prototype.fill=function(t,e,n){for(var r=e;n>r;r++)this.writeUInt8(r,t)},t.prototype.float2intbits=function(t){var e,n,r;return 0===t?0:t===Number.POSITIVE_INFINITY?i:t===Number.NEGATIVE_INFINITY?a:isNaN(t)?s:(r=0>t?1:0,t=Math.abs(t),1.1754942106924411e-38>=t&&t>=1.401298464324817e-45?(e=0,n=Math.round(t/Math.pow(2,-126)*Math.pow(2,23)),r<<31|e<<23|n):(e=Math.floor(Math.log(t)/Math.LN2),n=Math.round((t/Math.pow(2,e)-1)*Math.pow(2,23)),r<<31|e+127<<23|n))},t.prototype.double2longbits=function(t){var e,n,r,o;return 0===t?[0,0]:t===Number.POSITIVE_INFINITY?[0,2146435072]:t===Number.NEGATIVE_INFINITY?[0,-1048576]:isNaN(t)?[0,2146959360]:(o=0>t?1<<31:0,t=Math.abs(t),2.225073858507201e-308>=t&&t>=5e-324?(e=0,r=t/Math.pow(2,-1022)*Math.pow(2,52)):(e=Math.floor(Math.log(t)/Math.LN2),t<Math.pow(2,e)&&(e-=1),r=(t/Math.pow(2,e)-1)*Math.pow(2,52),e=e+1023<<20),n=0|r*Math.pow(2,-32)|o|e,[65535&r,n])},t.prototype.intbits2float=function(t){if(t===i)return Number.POSITIVE_INFINITY;if(t===a)return Number.NEGATIVE_INFINITY;var e,n=(2147483648&t)>>>31,s=(2139095040&t)>>>23,u=8388607&t;return e=0===s?Math.pow(-1,n)*u*Math.pow(2,-149):Math.pow(-1,n)*(1+u*Math.pow(2,-23))*Math.pow(2,s-127),(o>e||e>r)&&(e=0/0),e},t.prototype.longbits2double=function(t,e){var n=(2147483648&t)>>>31,r=(2146435072&t)>>>20,o=(1048575&t)*Math.pow(2,32)+e;return 0===r&&0===o?0:2047===r?0===o?1===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:0/0:0===r?Math.pow(-1,n)*o*Math.pow(2,-1074):Math.pow(-1,n)*(1+o*Math.pow(2,-52))*Math.pow(2,r-1023)},t}();e.BufferCoreCommon=u});var s=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};a("core/buffer_core_array",["require","exports","./buffer_core"],function(t,e,n){var r=[4294967040,4294902015,4278255615,16777215],o=function(t){function e(e){t.call(this),this.length=e,this.buff=new Array(Math.ceil(e/4));for(var n=this.buff.length,r=0;n>r;r++)this.buff[r]=0}return s(e,t),e.isAvailable=function(){return!0},e.prototype.getLength=function(){return this.length},e.prototype.writeUInt8=function(t,e){e&=255;var n=t>>2,o=3&t;this.buff[n]=this.buff[n]&r[o],this.buff[n]=this.buff[n]|e<<(o<<3)},e.prototype.readUInt8=function(t){var e=t>>2,n=3&t;return 255&this.buff[e]>>(n<<3)},e.prototype.copy=function(t,n){for(var r=new e(n-t),o=t;n>o;o++)r.writeUInt8(o-t,this.readUInt8(o));return r},e}(n.BufferCoreCommon);e.BufferCoreArray=o});var s=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};a("core/buffer_core_arraybuffer",["require","exports","./buffer_core"],function(t,e,n){var r=function(t){function e(e){t.call(this),this.buff="number"==typeof e?new DataView(new ArrayBuffer(e)):e instanceof DataView?e:new DataView(e),this.length=this.buff.byteLength}return s(e,t),e.isAvailable=function(){return"undefined"!=typeof DataView},e.prototype.getLength=function(){return this.length},e.prototype.writeInt8=function(t,e){this.buff.setInt8(t,e)},e.prototype.writeInt16LE=function(t,e){this.buff.setInt16(t,e,!0)},e.prototype.writeInt16BE=function(t,e){this.buff.setInt16(t,e,!1)},e.prototype.writeInt32LE=function(t,e){this.buff.setInt32(t,e,!0)},e.prototype.writeInt32BE=function(t,e){this.buff.setInt32(t,e,!1)},e.prototype.writeUInt8=function(t,e){this.buff.setUint8(t,e)},e.prototype.writeUInt16LE=function(t,e){this.buff.setUint16(t,e,!0)},e.prototype.writeUInt16BE=function(t,e){this.buff.setUint16(t,e,!1)},e.prototype.writeUInt32LE=function(t,e){this.buff.setUint32(t,e,!0)},e.prototype.writeUInt32BE=function(t,e){this.buff.setUint32(t,e,!1)},e.prototype.writeFloatLE=function(t,e){this.buff.setFloat32(t,e,!0)},e.prototype.writeFloatBE=function(t,e){this.buff.setFloat32(t,e,!1)},e.prototype.writeDoubleLE=function(t,e){this.buff.setFloat64(t,e,!0)},e.prototype.writeDoubleBE=function(t,e){this.buff.setFloat64(t,e,!1)},e.prototype.readInt8=function(t){return this.buff.getInt8(t)},e.prototype.readInt16LE=function(t){return this.buff.getInt16(t,!0)},e.prototype.readInt16BE=function(t){return this.buff.getInt16(t,!1)},e.prototype.readInt32LE=function(t){return this.buff.getInt32(t,!0)},e.prototype.readInt32BE=function(t){return this.buff.getInt32(t,!1)},e.prototype.readUInt8=function(t){return this.buff.getUint8(t)},e.prototype.readUInt16LE=function(t){return this.buff.getUint16(t,!0)},e.prototype.readUInt16BE=function(t){return this.buff.getUint16(t,!1)},e.prototype.readUInt32LE=function(t){return this.buff.getUint32(t,!0)},e.prototype.readUInt32BE=function(t){return this.buff.getUint32(t,!1)},e.prototype.readFloatLE=function(t){return this.buff.getFloat32(t,!0)},e.prototype.readFloatBE=function(t){return this.buff.getFloat32(t,!1)},e.prototype.readDoubleLE=function(t){return this.buff.getFloat64(t,!0)},e.prototype.readDoubleBE=function(t){return this.buff.getFloat64(t,!1)},e.prototype.copy=function(t,n){var r,o=this.buff.buffer;if(ArrayBuffer.prototype.slice)r=o.slice(t,n);else{var i=n-t;r=new ArrayBuffer(i);var a=new Uint8Array(r),s=new Uint8Array(o);a.set(s.subarray(t,n))}return new e(r)},e.prototype.fill=function(t,e,n){t=255&t;var r,o=n-e,i=4*(0|o/4),a=t<<24|t<<16|t<<8|t;for(r=0;i>r;r+=4)this.writeInt32LE(r+e,a);for(r=i;o>r;r++)this.writeUInt8(r+e,t)},e.prototype.getDataView=function(){return this.buff},e}(n.BufferCoreCommon);e.BufferCoreArrayBuffer=r});var s=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};a("core/buffer_core_imagedata",["require","exports","./buffer_core"],function(t,e,n){var r=function(t){function e(n){t.call(this),this.length=n,this.buff=e.getCanvasPixelArray(n)}return s(e,t),e.getCanvasPixelArray=function(t){var n=e.imageDataFactory;return void 0===n&&(e.imageDataFactory=n=document.createElement("canvas").getContext("2d")),0===t&&(t=1),n.createImageData(Math.ceil(t/4),1).data},e.isAvailable=function(){return"undefined"!=typeof CanvasPixelArray},e.prototype.getLength=function(){return this.length},e.prototype.writeUInt8=function(t,e){this.buff[t]=e},e.prototype.readUInt8=function(t){return this.buff[t]},e.prototype.copy=function(t,n){for(var r=new e(n-t),o=t;n>o;o++)r.writeUInt8(o-t,this.buff[o]);return r},e}(n.BufferCoreCommon);e.BufferCoreImageData=r}),a("core/string_util",["require","exports"],function(t,e){function n(t){switch(t=function(){switch(typeof t){case"object":return""+t;case"string":return t;default:throw new Error("Invalid encoding argument specified")}}(),t=t.toLowerCase()){case"utf8":case"utf-8":return r;case"ascii":return o;case"binary":return a;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u;case"hex":return f;case"base64":return s;case"binary_string":return c;case"binary_string_ie":return p;case"extended_ascii":return i;default:throw new Error("Unknown encoding: "+t)}}e.FindUtil=n;var r=function(){function t(){}return t.str2byte=function(t,e){for(var n=e.length,r=0,o=0,i=n,a=0;r<t.length&&i>o;){var s=t.charCodeAt(r++),u=t.charCodeAt(r);if(s>=55296&&56319>=s&&u>=56320&&57343>=u){if(o+3>=i)break;a++;var f=(1024|1023&s)<<10|1023&u;e.writeUInt8(240|f>>18,o++),e.writeUInt8(128|63&f>>12,o++),e.writeUInt8(128|63&f>>6,o++),e.writeUInt8(128|63&f,o++),r++}else if(128>s)e.writeUInt8(s,o++),a++;else if(2048>s){if(o+1>=i)break;a++,e.writeUInt8(192|s>>6,o++),e.writeUInt8(128|63&s,o++)}else if(65536>s){if(o+2>=i)break;a++,e.writeUInt8(224|s>>12,o++),e.writeUInt8(128|63&s>>6,o++),e.writeUInt8(128|63&s,o++)}}return o},t.byte2str=function(t){for(var e=[],n=0;n<t.length;){var r=t.readUInt8(n++);if(128>r)e.push(String.fromCharCode(r));else{if(192>r)throw new Error("Found incomplete part of character in string.");if(224>r)e.push(String.fromCharCode((31&r)<<6|63&t.readUInt8(n++)));else if(240>r)e.push(String.fromCharCode((15&r)<<12|(63&t.readUInt8(n++))<<6|63&t.readUInt8(n++)));else{if(!(248>r))throw new Error("Unable to represent UTF-8 string as UTF-16 JavaScript string.");var o=t.readUInt8(n+2);e.push(String.fromCharCode(55296|1023&((7&r)<<8|(63&t.readUInt8(n++))<<2|(63&t.readUInt8(n++))>>4))),e.push(String.fromCharCode(56320|((15&o)<<6|63&t.readUInt8(n++))))}}}return e.join("")},t.byteLength=function(t){var e=encodeURIComponent(t).match(/%[89ABab]/g);return t.length+(e?e.length:0)},t}();e.UTF8=r;var o=function(){function t(){}return t.str2byte=function(t,e){for(var n=t.length>e.length?e.length:t.length,r=0;n>r;r++)e.writeUInt8(t.charCodeAt(r)%256,r);return n},t.byte2str=function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=String.fromCharCode(127&t.readUInt8(n));return e.join("")},t.byteLength=function(t){return t.length},t}();e.ASCII=o;var i=function(){function t(){}return t.str2byte=function(e,n){for(var r=e.length>n.length?n.length:e.length,o=0;r>o;o++){var i=e.charCodeAt(o);if(i>127){var a=t.extendedChars.indexOf(e.charAt(o));a>-1&&(i=a+128)}n.writeUInt8(i,o)}return r},t.byte2str=function(e){for(var n=new Array(e.length),r=0;r<e.length;r++){var o=e.readUInt8(r);n[r]=o>127?t.extendedChars[o-128]:String.fromCharCode(o)}return n.join("")},t.byteLength=function(t){return t.length},t.extendedChars=["Ç","ü","é","â","ä","à","å","ç","ê","ë","è","ï","î","ì","Ä","Å","É","æ","Æ","ô","ö","ò","û","ù","ÿ","Ö","Ü","ø","£","Ø","×","ƒ","á","í","ó","ú","ñ","Ñ","ª","º","¿","®","¬","½","¼","¡","«","»","_","_","_","¦","¦","Á","Â","À","©","¦","¦","+","+","¢","¥","+","+","-","-","+","-","+","ã","Ã","+","+","-","-","¦","-","+","¤","ð","Ð","Ê","Ë","È","i","Í","Î","Ï","+","+","_","_","¦","Ì","_","Ó","ß","Ô","Ò","õ","Õ","µ","þ","Þ","Ú","Û","Ù","ý","Ý","¯","´","­","±","_","¾","¶","§","÷","¸","°","¨","·","¹","³","²","_"," "],t}();e.ExtendedASCII=i;var a=function(){function t(){}return t.str2byte=function(t,e){for(var n=t.length>e.length?e.length:t.length,r=0;n>r;r++)e.writeUInt8(255&t.charCodeAt(r),r);return n},t.byte2str=function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=String.fromCharCode(255&t.readUInt8(n));return e.join("")},t.byteLength=function(t){return t.length},t}();e.BINARY=a;var s=function(){function t(){}return t.byte2str=function(e){for(var n="",r=0;r<e.length;){var o=e.readUInt8(r++),i=r<e.length?e.readUInt8(r++):0/0,a=r<e.length?e.readUInt8(r++):0/0,s=o>>2,u=(3&o)<<4|i>>4,f=(15&i)<<2|a>>6,c=63&a;isNaN(i)?f=c=64:isNaN(a)&&(c=64),n=n+t.num2b64[s]+t.num2b64[u]+t.num2b64[f]+t.num2b64[c]}return n},t.str2byte=function(e,n){var r=n.length,o="",i=0;e=e.replace(/[^A-Za-z0-9\+\/\=\-\_]/g,"");for(var a=0;i<e.length;){var s=t.b642num[e.charAt(i++)],u=t.b642num[e.charAt(i++)],f=t.b642num[e.charAt(i++)],c=t.b642num[e.charAt(i++)],p=s<<2|u>>4,l=(15&u)<<4|f>>2,h=(3&f)<<6|c;if(n.writeUInt8(p,a++),a===r)break;if(64!==f&&(o+=n.writeUInt8(l,a++)),a===r)break;if(64!==c&&(o+=n.writeUInt8(h,a++)),a===r)break}return a},t.byteLength=function(t){return Math.floor(6*t.replace(/[^A-Za-z0-9\+\/\-\_]/g,"").length/8)},t.b64chars=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/","="],t.num2b64=function(){for(var e=new Array(t.b64chars.length),n=0;n<t.b64chars.length;n++){var r=t.b64chars[n];e[n]=r}return e}(),t.b642num=function(){for(var e={},n=0;n<t.b64chars.length;n++){var r=t.b64chars[n];e[r]=n}return e["-"]=62,e._=63,e}(),t}();e.BASE64=s;var u=function(){function t(){}return t.str2byte=function(t,e){var n=t.length;2*n>e.length&&(n=1===e.length%2?(e.length-1)/2:e.length/2);for(var r=0;n>r;r++)e.writeUInt16LE(t.charCodeAt(r),2*r);return 2*n},t.byte2str=function(t){if(0!==t.length%2)throw new Error("Invalid UCS2 byte array.");for(var e=new Array(t.length/2),n=0;n<t.length;n+=2)e[n/2]=String.fromCharCode(t.readUInt8(n)|t.readUInt8(n+1)<<8);return e.join("")},t.byteLength=function(t){return 2*t.length},t}();e.UCS2=u;var f=function(){function t(){}return t.str2byte=function(t,e){if(1===t.length%2)throw new Error("Invalid hex string");var n=t.length>>1;n>e.length&&(n=e.length);for(var r=0;n>r;r++){var o=this.hex2num[t.charAt(r<<1)],i=this.hex2num[t.charAt((r<<1)+1)];e.writeUInt8(o<<4|i,r)}return n},t.byte2str=function(t){for(var e=t.length,n=new Array(e<<1),r=0,o=0;e>o;o++){var i=15&t.readUInt8(o),a=t.readUInt8(o)>>4;n[r++]=this.num2hex[a],n[r++]=this.num2hex[i]}return n.join("")},t.byteLength=function(t){return t.length>>1},t.HEXCHARS="0123456789abcdef",t.num2hex=function(){for(var e=new Array(t.HEXCHARS.length),n=0;n<t.HEXCHARS.length;n++){var r=t.HEXCHARS[n];e[n]=r}return e}(),t.hex2num=function(){var e,n,r={};for(e=0;e<t.HEXCHARS.length;e++)n=t.HEXCHARS[e],r[n]=e;var o="ABCDEF";for(e=0;e<o.length;e++)n=o[e],r[n]=e+10;return r}(),t}();e.HEX=f;var c=function(){function t(){}return t.str2byte=function(e,n){if(0===e.length)return 0;var r=t.byteLength(e);r>n.length&&(r=n.length);var o=0,i=0,a=i+r,s=e.charCodeAt(o++);0!==s&&(n.writeUInt8(255&s,0),i=1);for(var u=i;a>u;u+=2){var f=e.charCodeAt(o++);1===a-u&&n.writeUInt8(f>>8,u),a-u>=2&&n.writeUInt16BE(f,u)}return r},t.byte2str=function(t){var e=t.length;if(0===e)return"";for(var n=new Array((e>>1)+1),r=0,o=0;o<n.length;o++)n[o]=0===o?1===e%2?String.fromCharCode(256|t.readUInt8(r++)):String.fromCharCode(0):String.fromCharCode(t.readUInt8(r++)<<8|t.readUInt8(r++));return n.join("")},t.byteLength=function(t){if(0===t.length)return 0;var e=t.charCodeAt(0),n=t.length-1<<1;return 0!==e&&n++,n},t}();e.BINSTR=c;var p=function(){function t(){}return t.str2byte=function(t,e){for(var n=t.length>e.length?e.length:t.length,r=0;n>r;r++)e.writeUInt8(t.charCodeAt(r)-32,r);return n},t.byte2str=function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=String.fromCharCode(t.readUInt8(n)+32);return e.join("")},t.byteLength=function(t){return t.length},t}();e.BINSTRIE=p}),a("core/buffer",["require","exports","./buffer_core","./buffer_core_array","./buffer_core_arraybuffer","./buffer_core_imagedata","./string_util"],function(t,e,n,r,o,i,a){var s=[o.BufferCoreArrayBuffer,i.BufferCoreImageData,r.BufferCoreArray],u=function(){var t,e;for(t=0;t<s.length;t++)if(e=s[t],e.isAvailable())return e;throw new Error("This browser does not support any available BufferCore implementations.")}(),f=function(){function t(e,r,i){"undefined"==typeof r&&(r="utf8"),this.offset=0;var a;if(!(this instanceof t))return new t(e,r);if(e instanceof n.BufferCoreCommon){this.data=e;var s="number"==typeof r?r:0,f="number"==typeof i?i:this.data.getLength();this.offset=s,this.length=f-s}else if("number"==typeof e){if(e!==e>>>0)throw new TypeError("Buffer size must be a uint32.");this.length=e,this.data=new u(e)}else if("undefined"!=typeof DataView&&e instanceof DataView)this.data=new o.BufferCoreArrayBuffer(e),this.length=e.byteLength;else if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer)this.data=new o.BufferCoreArrayBuffer(e),this.length=e.byteLength;else if(e instanceof t){var c=e;this.data=new u(e.length),this.length=e.length,c.copy(this)}else if(Array.isArray(e)||null!=e&&"object"==typeof e&&"number"==typeof e[0]){for(this.data=new u(e.length),a=0;a<e.length;a++)this.data.writeUInt8(a,e[a]);this.length=e.length}else{if("string"!=typeof e)throw new Error("Invalid argument to Buffer constructor: "+e);this.length=t.byteLength(e,r),this.data=new u(this.length),this.write(e,0,this.length,r)}}return t.prototype.getBufferCore=function(){return this.data},t.prototype.getOffset=function(){return this.offset},t.prototype.set=function(t,e){return 0>e?this.writeInt8(e,t):this.writeUInt8(e,t)},t.prototype.get=function(t){return this.readUInt8(t)},t.prototype.write=function(e,n,r,o){if("undefined"==typeof n&&(n=0),"undefined"==typeof r&&(r=this.length),"undefined"==typeof o&&(o="utf8"),"string"==typeof n?(o=""+n,n=0,r=this.length):"string"==typeof r&&(o=""+r,r=this.length),n>=this.length)return 0;var i=a.FindUtil(o);return r=r+n>this.length?this.length-n:r,n+=this.offset,i.str2byte(e,0===n&&r===this.length?this:new t(this.data,n,r+n))},t.prototype.toString=function(e,n,r){if("undefined"==typeof e&&(e="utf8"),"undefined"==typeof n&&(n=0),"undefined"==typeof r&&(r=this.length),!(r>=n))throw new Error("Invalid start/end positions: "+n+" - "+r);if(n===r)return"";r>this.length&&(r=this.length);var o=a.FindUtil(e);return o.byte2str(0===n&&r===this.length?this:new t(this.data,n+this.offset,r+this.offset))},t.prototype.toJSON=function(){for(var t=this.length,e=new Array(t),n=0;t>n;n++)e[n]=this.readUInt8(n);return{type:"Buffer",data:e}},t.prototype.copy=function(t,e,n,r){if("undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=0),"undefined"==typeof r&&(r=this.length),e=0>e?0:e,n=0>n?0:n,n>r)throw new RangeError("sourceEnd < sourceStart");if(r===n)return 0;if(e>=t.length)throw new RangeError("targetStart out of bounds");if(n>=this.length)throw new RangeError("sourceStart out of bounds");if(r>this.length)throw new RangeError("sourceEnd out of bounds");for(var o=Math.min(r-n,t.length-e,this.length-n),i=0;o>i;i++)t.writeUInt8(this.readUInt8(n+i),e+i);return o},t.prototype.slice=function(e,n){if("undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=this.length),0>e&&(e+=this.length,0>e&&(e=0)),0>n&&(n+=this.length,0>n&&(n=0)),n>this.length&&(n=this.length),e>n&&(e=n),0>e||0>n||e>=this.length||n>this.length)throw new Error("Invalid slice indices.");return new t(this.data,e+this.offset,n+this.offset)},t.prototype.sliceCopy=function(e,n){if("undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=this.length),0>e&&(e+=this.length,0>e&&(e=0)),0>n&&(n+=this.length,0>n&&(n=0)),n>this.length&&(n=this.length),e>n&&(e=n),0>e||0>n||e>=this.length||n>this.length)throw new Error("Invalid slice indices.");return new t(this.data.copy(e+this.offset,n+this.offset))},t.prototype.fill=function(t,e,n){"undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=this.length);var r=typeof t;switch(r){case"string":t=255&t.charCodeAt(0);break;case"number":break;default:throw new Error("Invalid argument to fill.")}e+=this.offset,n+=this.offset,this.data.fill(t,e,n)},t.prototype.readUInt8=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readUInt8(t)},t.prototype.readUInt16LE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readUInt16LE(t)},t.prototype.readUInt16BE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readUInt16BE(t)},t.prototype.readUInt32LE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readUInt32LE(t)},t.prototype.readUInt32BE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readUInt32BE(t)},t.prototype.readInt8=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readInt8(t)},t.prototype.readInt16LE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readInt16LE(t)},t.prototype.readInt16BE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readInt16BE(t)},t.prototype.readInt32LE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readInt32LE(t)},t.prototype.readInt32BE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readInt32BE(t)},t.prototype.readFloatLE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readFloatLE(t)},t.prototype.readFloatBE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readFloatBE(t)},t.prototype.readDoubleLE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readDoubleLE(t)},t.prototype.readDoubleBE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readDoubleBE(t)},t.prototype.writeUInt8=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeUInt8(e,t)},t.prototype.writeUInt16LE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeUInt16LE(e,t)},t.prototype.writeUInt16BE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeUInt16BE(e,t)},t.prototype.writeUInt32LE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeUInt32LE(e,t)},t.prototype.writeUInt32BE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeUInt32BE(e,t)},t.prototype.writeInt8=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeInt8(e,t)},t.prototype.writeInt16LE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeInt16LE(e,t)},t.prototype.writeInt16BE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeInt16BE(e,t)},t.prototype.writeInt32LE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeInt32LE(e,t)},t.prototype.writeInt32BE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeInt32BE(e,t)},t.prototype.writeFloatLE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeFloatLE(e,t)},t.prototype.writeFloatBE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeFloatBE(e,t)},t.prototype.writeDoubleLE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeDoubleLE(e,t)},t.prototype.writeDoubleBE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeDoubleBE(e,t)},t.isEncoding=function(t){try{a.FindUtil(t)}catch(e){return!1}return!0},t.isBuffer=function(e){return e instanceof t},t.byteLength=function(t,e){"undefined"==typeof e&&(e="utf8");var n=a.FindUtil(e);return n.byteLength(t)},t.concat=function(e,n){var r;if(0===e.length||0===n)return new t(0);if(1===e.length)return e[0];if(null==n){n=0;for(var o=0;o<e.length;o++)r=e[o],n+=r.length}for(var i=new t(n),a=0,s=0;s<e.length;s++)r=e[s],a+=r.copy(i,a);return i},t}();e.Buffer=f}),a("core/file_flag",["require","exports","./api_error"],function(t,e,n){!function(t){t[t.NOP=0]="NOP",t[t.THROW_EXCEPTION=1]="THROW_EXCEPTION",t[t.TRUNCATE_FILE=2]="TRUNCATE_FILE",t[t.CREATE_FILE=3]="CREATE_FILE"}(e.ActionType||(e.ActionType={})),e.ActionType;var r=function(){function t(e){if(this.flagStr=e,t.validFlagStrs.indexOf(e)<0)throw new n.ApiError(9,"Invalid flag: "+e)}return t.getFileFlag=function(e){return t.flagCache.hasOwnProperty(e)?t.flagCache[e]:t.flagCache[e]=new t(e)},t.prototype.isReadable=function(){return-1!==this.flagStr.indexOf("r")||-1!==this.flagStr.indexOf("+")
},t.prototype.isWriteable=function(){return-1!==this.flagStr.indexOf("w")||-1!==this.flagStr.indexOf("a")||-1!==this.flagStr.indexOf("+")},t.prototype.isTruncating=function(){return-1!==this.flagStr.indexOf("w")},t.prototype.isAppendable=function(){return-1!==this.flagStr.indexOf("a")},t.prototype.isSynchronous=function(){return-1!==this.flagStr.indexOf("s")},t.prototype.isExclusive=function(){return-1!==this.flagStr.indexOf("x")},t.prototype.pathExistsAction=function(){return this.isExclusive()?1:this.isTruncating()?2:0},t.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&"r+"!==this.flagStr?3:1},t.flagCache={},t.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"],t}();e.FileFlag=r});var s=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};a("core/node_eventemitter",["require","exports","./buffer","./api_error"],function(t,e,n,r){var o=n.Buffer,i=r.ApiError;r.ErrorCode;var a=function(){function t(t,e,n){this.data=t,this.encoding=e,this.cb=n,this.size="string"!=typeof t?t.length:o.byteLength(t,null!=e?e:void 0),"string"!=typeof this.data&&(this.data=this.data.sliceCopy())}return t.prototype.getData=function(t){return null==t?"string"==typeof this.data?new o(this.data,null!=this.encoding?this.encoding:void 0):this.data:"string"==typeof this.data?t===this.encoding?this.data:new o(this.data,null!=this.encoding?this.encoding:void 0).toString(t):this.data.toString(t)},t}(),u=function(){function t(){this._listeners={},this.maxListeners=10}return t.prototype.addListener=function(t,e){return"undefined"==typeof this._listeners[t]&&(this._listeners[t]=[]),this._listeners[t].push(e)>this.maxListeners&&process.stdout.write("Warning: Event "+t+" has more than "+this.maxListeners+" listeners.\n"),this.emit("newListener",t,e),this},t.prototype.on=function(t,e){return this.addListener(t,e)},t.prototype.once=function(t,e){var n=!1,r=function(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))};return this.addListener(t,r)},t.prototype._emitRemoveListener=function(t,e){var n;if(this._listeners.removeListener&&this._listeners.removeListener.length>0)for(n=0;n<e.length;n++)this.emit("removeListener",t,e[n])},t.prototype.removeListener=function(t,e){var n=this._listeners[t];if("undefined"!=typeof n){var r=n.indexOf(e);r>-1&&n.splice(r,1)}return this.emit("removeListener",t,e),this},t.prototype.removeAllListeners=function(t){var e,n,r;if("undefined"!=typeof t)e=this._listeners[t],this._listeners[t]=[],this._emitRemoveListener(t,e);else for(n=Object.keys(this._listeners),r=0;r<n.length;r++)this.removeAllListeners(n[r]);return this},t.prototype.setMaxListeners=function(t){this.maxListeners=t},t.prototype.listeners=function(t){return"undefined"==typeof this._listeners[t]&&(this._listeners[t]=[]),this._listeners[t].slice(0)},t.prototype.emit=function(t){for(var e=[],n=0;n<arguments.length-1;n++)e[n]=arguments[n+1];var r=this._listeners[t],o=!1;if("undefined"!=typeof r){var i;for(i=0;i<r.length;i++)o=!0,r[i].apply(this,e)}return o},t}();e.AbstractEventEmitter=u;var f=function(t){function e(e,n){t.call(this),this.writable=e,this.readable=n,this.encoding=null,this.flowing=!1,this.buffer=[],this.endEvent=null,this.ended=!1,this.drained=!0}return s(e,t),e.prototype.addListener=function(e,n){var r=t.prototype.addListener.call(this,e,n),o=this;return"data"!==e||this.flowing?"readable"===e&&this.buffer.length>0&&setTimeout(function(){o.emit("readable")},0):this.resume(),r},e.prototype._processArgs=function(t,e,n){return"string"==typeof e?new a(t,e,n):new a(t,null,e)},e.prototype._processEvents=function(){var t=0===this.buffer.length;this.drained!==t&&this.drained&&this.emit("readable"),this.flowing&&0!==this.buffer.length&&this.emit("data",this.read()),this.drained=0===this.buffer.length},e.prototype.emitEvent=function(t,e){this.emit(t,e.getData(this.encoding)),e.cb&&e.cb()},e.prototype.write=function(t,e,n){if(this.ended)throw new i(0,"Cannot write to an ended stream.");var r=this._processArgs(t,e,n);return this._push(r),this.flowing},e.prototype.end=function(t,e,n){if(this.ended)throw new i(0,"Stream is already closed.");var r=this._processArgs(t,e,n);this.ended=!0,this.endEvent=r,this._processEvents()},e.prototype.read=function(t){var e,n,r,i,s=[],u=[],f=0,c=0,p="number"!=typeof t;for(p&&(t=4294967295),c=0;c<this.buffer.length&&t>f;c++)n=this.buffer[c],s.push(n.getData()),n.cb&&u.push(n.cb),f+=n.size,e=n.cb;if(!p&&t>f)return null;if(this.buffer=this.buffer.slice(s.length),i=f>t?t:f,r=o.concat(s),f>t&&(e&&u.pop(),this._push(new a(r.slice(t),null,e))),u.length>0&&setTimeout(function(){var t;for(t=0;t<u.length;t++)u[t]()},0),this.ended&&0===this.buffer.length&&null!==this.endEvent){var l=this.endEvent,h=this;this.endEvent=null,setTimeout(function(){h.emitEvent("end",l)},0)}return 0===s.length?(this.emit("_read"),null):null===this.encoding?r.slice(0,i):r.toString(this.encoding,0,i)},e.prototype.setEncoding=function(t){this.encoding=t},e.prototype.pause=function(){this.flowing=!1},e.prototype.resume=function(){this.flowing=!0,this._processEvents()},e.prototype.pipe=function(){throw new i(0,"Unimplemented.")},e.prototype.unpipe=function(){},e.prototype.unshift=function(t){if(this.ended)throw new i(0,"Stream has ended.");this.buffer.unshift(new a(t,this.encoding)),this._processEvents()},e.prototype._push=function(t){this.buffer.push(t),this._processEvents()},e.prototype.wrap=function(){throw new i(0,"Unimplemented.")},e}(u);e.AbstractDuplexStream=f});var s=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};a("core/node_process",["require","exports","./node_eventemitter"],function(t,e,n){var r=null,o=function(t){function e(){t.call(this,!0,!0),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0}return s(e,t),e.prototype.setReadMode=function(t){this.isRaw!==t&&(this.isRaw=t,this.emit("modeChange"))},e.prototype.changeColumns=function(t){t!==this.columns&&(this.columns=t,this.emit("resize"))},e.prototype.changeRows=function(t){t!==this.rows&&(this.rows=t,this.emit("resize"))},e.isatty=function(t){return t instanceof e},e}(n.AbstractDuplexStream);e.TTY=o;var i=function(){function e(){this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.stdout=new o,this.stderr=new o,this.stdin=new o}return e.prototype.chdir=function(e){null===r&&(r=t("./node_path").path),this._cwd=r.resolve(e)},e.prototype.cwd=function(){return this._cwd},e.prototype.uptime=function(){return 0|(Date.now()-this.startTime)/1e3},e}();e.Process=i,e.process=new i}),a("core/node_path",["require","exports","./node_process"],function(t,e,n){var r=n.process,o=function(){function t(){}return t.normalize=function(e){""===e&&(e=".");var n=e.charAt(0)===t.sep;e=t._removeDuplicateSeps(e);for(var r=e.split(t.sep),o=[],i=0;i<r.length;i++){var a=r[i];"."!==a&&(".."===a&&(n||!n&&o.length>0&&".."!==o[0])?o.pop():o.push(a))}if(!n&&o.length<2)switch(o.length){case 1:""===o[0]&&o.unshift(".");break;default:o.push(".")}return e=o.join(t.sep),n&&e.charAt(0)!==t.sep&&(e=t.sep+e),e},t.join=function(){for(var e=[],n=0;n<arguments.length-0;n++)e[n]=arguments[n+0];for(var r=[],o=0;o<e.length;o++){var i=e[o];if("string"!=typeof i)throw new TypeError("Invalid argument type to path.join: "+typeof i);""!==i&&r.push(i)}return t.normalize(r.join(t.sep))},t.resolve=function(){for(var e=[],n=0;n<arguments.length-0;n++)e[n]=arguments[n+0];for(var o=[],i=0;i<e.length;i++){var a=e[i];if("string"!=typeof a)throw new TypeError("Invalid argument type to path.join: "+typeof a);""!==a&&(a.charAt(0)===t.sep&&(o=[]),o.push(a))}var s=t.normalize(o.join(t.sep));if(s.length>1&&s.charAt(s.length-1)===t.sep)return s.substr(0,s.length-1);if(s.charAt(0)!==t.sep){"."!==s.charAt(0)||1!==s.length&&s.charAt(1)!==t.sep||(s=1===s.length?"":s.substr(2));var u=r.cwd();s=""!==s?this.normalize(u+("/"!==u?t.sep:"")+s):u}return s},t.relative=function(e,n){var r;e=t.resolve(e),n=t.resolve(n);var o=e.split(t.sep),i=n.split(t.sep);i.shift(),o.shift();var a=0,s=[];for(r=0;r<o.length;r++){var u=o[r];if(u!==i[r]){a=o.length-r;break}}s=i.slice(r),1===o.length&&""===o[0]&&(a=0),a>o.length&&(a=o.length);var f="";for(r=0;a>r;r++)f+="../";return f+=s.join(t.sep),f.length>1&&f.charAt(f.length-1)===t.sep&&(f=f.substr(0,f.length-1)),f},t.dirname=function(e){e=t._removeDuplicateSeps(e);var n=e.charAt(0)===t.sep,r=e.split(t.sep);return""===r.pop()&&r.length>0&&r.pop(),r.length>1?r.join(t.sep):n?t.sep:"."},t.basename=function(e,n){if("undefined"==typeof n&&(n=""),""===e)return e;e=t.normalize(e);var r=e.split(t.sep),o=r[r.length-1];if(""===o&&r.length>1)return r[r.length-2];if(n.length>0){var i=o.substr(o.length-n.length);if(i===n)return o.substr(0,o.length-n.length)}return o},t.extname=function(e){e=t.normalize(e);var n=e.split(t.sep);if(e=n.pop(),""===e&&n.length>0&&(e=n.pop()),".."===e)return"";var r=e.lastIndexOf(".");return-1===r||0===r?"":e.substr(r)},t.isAbsolute=function(e){return e.length>0&&e.charAt(0)===t.sep},t._makeLong=function(t){return t},t._removeDuplicateSeps=function(t){return t=t.replace(this._replaceRegex,this.sep)},t.sep="/",t._replaceRegex=new RegExp("//+","g"),t.delimiter=":",t}();e.path=o}),a("core/node_fs",["require","exports","./api_error","./file_flag","./buffer","./node_path"],function(t,e,n,r,o,i){function a(t,e){if("function"!=typeof t)throw new l(9,"Callback must be a function.");switch("undefined"==typeof __numWaiting&&(__numWaiting=0),__numWaiting++,e){case 1:return function(e){setImmediate(function(){return __numWaiting--,t(e)})};case 2:return function(e,n){setImmediate(function(){return __numWaiting--,t(e,n)})};case 3:return function(e,n,r){setImmediate(function(){return __numWaiting--,t(e,n,r)})};default:throw new Error("Invalid invocation of wrapCb.")}}function s(t){if("function"!=typeof t.write)throw new l(3,"Invalid file descriptor.")}function u(t,e){switch(typeof t){case"number":return t;case"string":var n=parseInt(t,8);if(0/0!==n)return n;default:return e}}function f(t){if(t.indexOf("\x00")>=0)throw new l(9,"Path must be a string without null bytes.");if(""===t)throw new l(9,"Path must not be empty.");return y.resolve(t)}function c(t,e,n,r){switch(typeof t){case"object":return{encoding:"undefined"!=typeof t.encoding?t.encoding:e,flag:"undefined"!=typeof t.flag?t.flag:n,mode:u(t.mode,r)};case"string":return{encoding:t,flag:n,mode:r};default:return{encoding:e,flag:n,mode:r}}}function p(){}var l=n.ApiError;n.ErrorCode;var h=r.FileFlag,d=o.Buffer,y=i.path,w=function(){function t(){}return t._initialize=function(e){if(!e.constructor.isAvailable())throw new l(9,"Tried to instantiate BrowserFS with an unavailable file system.");return t.root=e},t._toUnixTimestamp=function(t){if("number"==typeof t)return t;if(t instanceof Date)return t.getTime()/1e3;throw new Error("Cannot parse time: "+t)},t.getRootFS=function(){return t.root?t.root:null},t.rename=function(e,n,r){"undefined"==typeof r&&(r=p);var o=a(r,1);try{t.root.rename(f(e),f(n),o)}catch(i){o(i)}},t.renameSync=function(e,n){t.root.renameSync(f(e),f(n))},t.exists=function(e,n){"undefined"==typeof n&&(n=p);var r=a(n,1);try{return t.root.exists(f(e),r)}catch(o){return r(!1)}},t.existsSync=function(e){try{return t.root.existsSync(f(e))}catch(n){return!1}},t.stat=function(e,n){"undefined"==typeof n&&(n=p);var r=a(n,2);try{return t.root.stat(f(e),!1,r)}catch(o){return r(o,null)}},t.statSync=function(e){return t.root.statSync(f(e),!1)},t.lstat=function(e,n){"undefined"==typeof n&&(n=p);var r=a(n,2);try{return t.root.stat(f(e),!0,r)}catch(o){return r(o,null)}},t.lstatSync=function(e){return t.root.statSync(f(e),!0)},t.truncate=function(e,n,r){"undefined"==typeof n&&(n=0),"undefined"==typeof r&&(r=p);var o=0;"function"==typeof n?r=n:"number"==typeof n&&(o=n);var i=a(r,1);try{return t.root.truncate(f(e),o,i)}catch(s){return i(s)}},t.truncateSync=function(e,n){return"undefined"==typeof n&&(n=0),t.root.truncateSync(f(e),n)},t.unlink=function(e,n){"undefined"==typeof n&&(n=p);var r=a(n,1);try{return t.root.unlink(f(e),r)}catch(o){return r(o)}},t.unlinkSync=function(e){return t.root.unlinkSync(f(e))},t.open=function(e,n,r,o){"undefined"==typeof o&&(o=p);var i=u(r,420);o="function"==typeof r?r:o;var s=a(o,2);try{return t.root.open(f(e),h.getFileFlag(n),i,s)}catch(c){return s(c,null)}},t.openSync=function(e,n,r){return"undefined"==typeof r&&(r=420),t.root.openSync(f(e),h.getFileFlag(n),r)},t.readFile=function(e,n,r){"undefined"==typeof n&&(n={}),"undefined"==typeof r&&(r=p);var o=c(n,null,"r",null);r="function"==typeof n?n:r;var i=a(r,2);try{var s=h.getFileFlag(o.flag);return s.isReadable()?t.root.readFile(f(e),o.encoding,s,i):i(new l(9,"Flag passed to readFile must allow for reading."))}catch(u){return i(u,null)}},t.readFileSync=function(e,n){"undefined"==typeof n&&(n={});var r=c(n,null,"r",null),o=h.getFileFlag(r.flag);if(!o.isReadable())throw new l(9,"Flag passed to readFile must allow for reading.");return t.root.readFileSync(f(e),r.encoding,o)},t.writeFile=function(e,n,r,o){"undefined"==typeof r&&(r={}),"undefined"==typeof o&&(o=p);var i=c(r,"utf8","w",420);o="function"==typeof r?r:o;var s=a(o,1);try{var u=h.getFileFlag(i.flag);return u.isWriteable()?t.root.writeFile(f(e),n,i.encoding,u,i.mode,s):s(new l(9,"Flag passed to writeFile must allow for writing."))}catch(d){return s(d)}},t.writeFileSync=function(e,n,r){var o=c(r,"utf8","w",420),i=h.getFileFlag(o.flag);if(!i.isWriteable())throw new l(9,"Flag passed to writeFile must allow for writing.");return t.root.writeFileSync(f(e),n,o.encoding,i,o.mode)},t.appendFile=function(e,n,r,o){"undefined"==typeof o&&(o=p);var i=c(r,"utf8","a",420);o="function"==typeof r?r:o;var s=a(o,1);try{var u=h.getFileFlag(i.flag);if(!u.isAppendable())return s(new l(9,"Flag passed to appendFile must allow for appending."));t.root.appendFile(f(e),n,i.encoding,u,i.mode,s)}catch(d){s(d)}},t.appendFileSync=function(e,n,r){var o=c(r,"utf8","a",420),i=h.getFileFlag(o.flag);if(!i.isAppendable())throw new l(9,"Flag passed to appendFile must allow for appending.");return t.root.appendFileSync(f(e),n,o.encoding,i,o.mode)},t.fstat=function(t,e){"undefined"==typeof e&&(e=p);var n=a(e,2);try{s(t),t.stat(n)}catch(r){n(r)}},t.fstatSync=function(t){return s(t),t.statSync()},t.close=function(t,e){"undefined"==typeof e&&(e=p);var n=a(e,1);try{s(t),t.close(n)}catch(r){n(r)}},t.closeSync=function(t){return s(t),t.closeSync()},t.ftruncate=function(t,e,n){"undefined"==typeof n&&(n=p);var r="number"==typeof e?e:0;n="function"==typeof e?e:n;var o=a(n,1);try{s(t),t.truncate(r,o)}catch(i){o(i)}},t.ftruncateSync=function(t,e){return"undefined"==typeof e&&(e=0),s(t),t.truncateSync(e)},t.fsync=function(t,e){"undefined"==typeof e&&(e=p);var n=a(e,1);try{s(t),t.sync(n)}catch(r){n(r)}},t.fsyncSync=function(t){return s(t),t.syncSync()},t.fdatasync=function(t,e){"undefined"==typeof e&&(e=p);var n=a(e,1);try{s(t),t.datasync(n)}catch(r){n(r)}},t.fdatasyncSync=function(t){s(t),t.datasyncSync()},t.write=function(t,e,n,r,o,i){"undefined"==typeof i&&(i=p);var u,f,c,h=null;if("string"==typeof e){var y="utf8";switch(typeof n){case"function":i=n;break;case"number":h=n,y="string"==typeof r?r:"utf8",i="function"==typeof o?o:i;break;default:return i="function"==typeof r?r:"function"==typeof o?o:i,i(new l(9,"Invalid arguments."))}u=new d(e,y),f=0,c=u.length}else u=e,f=n,c=r,h="number"==typeof o?o:null,i="function"==typeof o?o:i;var w=a(i,3);try{s(t),null==h&&(h=t.getPos()),t.write(u,f,c,h,w)}catch(g){w(g)}},t.writeSync=function(t,e,n,r,o){var i,a,u,f=0;if("string"==typeof e){u="number"==typeof n?n:null;var c="string"==typeof r?r:"utf8";f=0,i=new d(e,c),a=i.length}else i=e,f=n,a=r,u="number"==typeof o?o:null;return s(t),null==u&&(u=t.getPos()),t.writeSync(i,f,a,u)},t.read=function(t,e,n,r,o,i){"undefined"==typeof i&&(i=p);var u,f,c,l,h;if("number"==typeof e){c=e,u=n;var y=r;i="function"==typeof o?o:i,f=0,l=new d(c),h=a(function(t,e,n){return t?i(t):(i(t,n.toString(y),e),void 0)},3)}else l=e,f=n,c=r,u=o,h=a(i,3);try{s(t),null==u&&(u=t.getPos()),t.read(l,f,c,u,h)}catch(w){h(w)}},t.readSync=function(t,e,n,r,o){var i,a,u,f,c=!1;if("number"==typeof e){u=e,f=n;var p=r;a=0,i=new d(u),c=!0}else i=e,a=n,u=r,f=o;s(t),null==f&&(f=t.getPos());var l=t.readSync(i,a,u,f);return c?[i.toString(p),l]:l},t.fchown=function(t,e,n,r){"undefined"==typeof r&&(r=p);var o=a(r,1);try{s(t),t.chown(e,n,o)}catch(i){o(i)}},t.fchownSync=function(t,e,n){return s(t),t.chownSync(e,n)},t.fchmod=function(t,e,n){"undefined"==typeof n&&(n=p);var r=a(n,1);try{e="string"==typeof e?parseInt(e,8):e,s(t),t.chmod(e,r)}catch(o){r(o)}},t.fchmodSync=function(t,e){return e="string"==typeof e?parseInt(e,8):e,s(t),t.chmodSync(e)},t.futimes=function(t,e,n,r){"undefined"==typeof r&&(r=p);var o=a(r,1);try{s(t),"number"==typeof e&&(e=new Date(1e3*e)),"number"==typeof n&&(n=new Date(1e3*n)),t.utimes(e,n,o)}catch(i){o(i)}},t.futimesSync=function(t,e,n){return s(t),"number"==typeof e&&(e=new Date(1e3*e)),"number"==typeof n&&(n=new Date(1e3*n)),t.utimesSync(e,n)},t.rmdir=function(e,n){"undefined"==typeof n&&(n=p);var r=a(n,1);try{e=f(e),t.root.rmdir(e,r)}catch(o){r(o)}},t.rmdirSync=function(e){return e=f(e),t.root.rmdirSync(e)},t.mkdir=function(e,n,r){"undefined"==typeof r&&(r=p),"function"==typeof n&&(r=n,n=511);var o=a(r,1);try{e=f(e),t.root.mkdir(e,n,o)}catch(i){o(i)}},t.mkdirSync=function(e,n){return"undefined"==typeof n&&(n=511),n="string"==typeof n?parseInt(n,8):n,e=f(e),t.root.mkdirSync(e,n)},t.readdir=function(e,n){"undefined"==typeof n&&(n=p);var r=a(n,2);try{e=f(e),t.root.readdir(e,r)}catch(o){r(o)}},t.readdirSync=function(e){return e=f(e),t.root.readdirSync(e)},t.link=function(e,n,r){"undefined"==typeof r&&(r=p);var o=a(r,1);try{e=f(e),n=f(n),t.root.link(e,n,o)}catch(i){o(i)}},t.linkSync=function(e,n){return e=f(e),n=f(n),t.root.linkSync(e,n)},t.symlink=function(e,n,r,o){"undefined"==typeof o&&(o=p);var i="string"==typeof r?r:"file";o="function"==typeof r?r:o;var s=a(o,1);try{if("file"!==i&&"dir"!==i)return s(new l(9,"Invalid type: "+i));e=f(e),n=f(n),t.root.symlink(e,n,i,s)}catch(u){s(u)}},t.symlinkSync=function(e,n,r){if(null==r)r="file";else if("file"!==r&&"dir"!==r)throw new l(9,"Invalid type: "+r);return e=f(e),n=f(n),t.root.symlinkSync(e,n,r)},t.readlink=function(e,n){"undefined"==typeof n&&(n=p);var r=a(n,2);try{e=f(e),t.root.readlink(e,r)}catch(o){r(o)}},t.readlinkSync=function(e){return e=f(e),t.root.readlinkSync(e)},t.chown=function(e,n,r,o){"undefined"==typeof o&&(o=p);var i=a(o,1);try{e=f(e),t.root.chown(e,!1,n,r,i)}catch(s){i(s)}},t.chownSync=function(e,n,r){e=f(e),t.root.chownSync(e,!1,n,r)},t.lchown=function(e,n,r,o){"undefined"==typeof o&&(o=p);var i=a(o,1);try{e=f(e),t.root.chown(e,!0,n,r,i)}catch(s){i(s)}},t.lchownSync=function(e,n,r){return e=f(e),t.root.chownSync(e,!0,n,r)},t.chmod=function(e,n,r){"undefined"==typeof r&&(r=p);var o=a(r,1);try{n="string"==typeof n?parseInt(n,8):n,e=f(e),t.root.chmod(e,!1,n,o)}catch(i){o(i)}},t.chmodSync=function(e,n){return n="string"==typeof n?parseInt(n,8):n,e=f(e),t.root.chmodSync(e,!1,n)},t.lchmod=function(e,n,r){"undefined"==typeof r&&(r=p);var o=a(r,1);try{n="string"==typeof n?parseInt(n,8):n,e=f(e),t.root.chmod(e,!0,n,o)}catch(i){o(i)}},t.lchmodSync=function(e,n){return e=f(e),n="string"==typeof n?parseInt(n,8):n,t.root.chmodSync(e,!0,n)},t.utimes=function(e,n,r,o){"undefined"==typeof o&&(o=p);var i=a(o,1);try{e=f(e),"number"==typeof n&&(n=new Date(1e3*n)),"number"==typeof r&&(r=new Date(1e3*r)),t.root.utimes(e,n,r,i)}catch(s){i(s)}},t.utimesSync=function(e,n,r){return e=f(e),"number"==typeof n&&(n=new Date(1e3*n)),"number"==typeof r&&(r=new Date(1e3*r)),t.root.utimesSync(e,n,r)},t.realpath=function(e,n,r){"undefined"==typeof r&&(r=p);var o="object"==typeof n?n:{};r="function"==typeof n?n:p;var i=a(r,2);try{e=f(e),t.root.realpath(e,o,i)}catch(s){i(s)}},t.realpathSync=function(e,n){return"undefined"==typeof n&&(n={}),e=f(e),t.root.realpathSync(e,n)},t.root=null,t}();e.fs=w}),a("core/browserfs",["require","exports","./buffer","./node_fs","./node_path","./node_process"],function(t,e,n,r,o,i){function a(t){t.Buffer=n.Buffer,t.process=i.process;var r=null!=t.require?t.require:null;t.require=function(t){var n=e.BFSRequire(t);return null==n?r.apply(null,Array.prototype.slice.call(arguments,0)):n}}function s(t,n){e.FileSystem[t]=n}function u(t){switch(t){case"fs":return r.fs;case"path":return o.path;case"buffer":return n;case"process":return i.process;default:return e.FileSystem[t]}}function f(t){return r.fs._initialize(t)}e.install=a,e.FileSystem={},e.registerFileSystem=s,e.BFSRequire=u,e.initialize=f}),a("core/file",["require","exports","./api_error"],function(t,e,n){var r=n.ApiError;n.ErrorCode;var o=function(){function t(){}return t.prototype.sync=function(t){t(new r(14))},t.prototype.syncSync=function(){throw new r(14)},t.prototype.datasync=function(t){this.sync(t)},t.prototype.datasyncSync=function(){return this.syncSync()},t.prototype.chown=function(t,e,n){n(new r(14))},t.prototype.chownSync=function(){throw new r(14)},t.prototype.chmod=function(t,e){e(new r(14))},t.prototype.chmodSync=function(){throw new r(14)},t.prototype.utimes=function(t,e,n){n(new r(14))},t.prototype.utimesSync=function(){throw new r(14)},t}();e.BaseFile=o});var s=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};a("generic/preload_file",["require","exports","../core/file","../core/buffer","../core/api_error","../core/node_fs"],function(t,e,n,r,o,i){var a=o.ApiError;o.ErrorCode;var u=i.fs,f=r.Buffer,c=function(t){function e(e,n,r,o,i){if(t.call(this),this._pos=0,this._fs=e,this._path=n,this._flag=r,this._stat=o,this._buffer=null!=i?i:new f(0),this._stat.size!==this._buffer.length)throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return s(e,t),e.prototype.getPath=function(){return this._path},e.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},e.prototype.advancePos=function(t){return this._pos+=t},e.prototype.setPos=function(t){return this._pos=t},e.prototype.sync=function(t){try{this.syncSync(),t()}catch(e){t(e)}},e.prototype.syncSync=function(){throw new a(14)},e.prototype.close=function(t){try{this.closeSync(),t()}catch(e){t(e)}},e.prototype.closeSync=function(){throw new a(14)},e.prototype.stat=function(t){try{t(null,this._stat.clone())}catch(e){t(e)}},e.prototype.statSync=function(){return this._stat.clone()},e.prototype.truncate=function(t,e){try{this.truncateSync(t),this._flag.isSynchronous()&&!u.getRootFS().supportsSynch()&&this.sync(e),e()}catch(n){return e(n)}},e.prototype.truncateSync=function(t){if(!this._flag.isWriteable())throw new a(0,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,t>this._buffer.length){var e=new f(t-this._buffer.length);return e.fill(0),this.writeSync(e,0,e.length,this._buffer.length),this._flag.isSynchronous()&&u.getRootFS().supportsSynch()&&this.syncSync(),void 0}this._stat.size=t;var n=new f(t);this._buffer.copy(n,0,0,t),this._buffer=n,this._flag.isSynchronous()&&u.getRootFS().supportsSynch()&&this.syncSync()},e.prototype.write=function(t,e,n,r,o){try{o(null,this.writeSync(t,e,n,r),t)}catch(i){o(i)}},e.prototype.writeSync=function(t,e,n,r){if(null==r&&(r=this.getPos()),!this._flag.isWriteable())throw new a(0,"File not opened with a writeable mode.");var o=r+n;if(o>this._stat.size&&(this._stat.size=o,o>this._buffer.length)){var i=new f(o);this._buffer.copy(i),this._buffer=i}var s=t.copy(this._buffer,r,e,e+n);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),s):(this.setPos(r+s),s)},e.prototype.read=function(t,e,n,r,o){try{o(null,this.readSync(t,e,n,r),t)}catch(i){o(i)}},e.prototype.readSync=function(t,e,n,r){if(!this._flag.isReadable())throw new a(0,"File not opened with a readable mode.");null==r&&(r=this.getPos());var o=r+n;o>this._stat.size&&(n=this._stat.size-r);var i=this._buffer.copy(t,e,r,r+n);return this._stat.atime=new Date,this._pos=r+n,i},e.prototype.chmod=function(t,e){try{this.chmodSync(t),e()}catch(n){e(n)}},e.prototype.chmodSync=function(t){if(!this._fs.supportsProps())throw new a(14);this._stat.chmod(t),this.syncSync()},e}(n.BaseFile);e.PreloadFile=c;var p=function(t){function e(e,n,r,o,i){t.call(this,e,n,r,o,i)}return s(e,t),e.prototype.sync=function(t){t()},e.prototype.syncSync=function(){},e.prototype.close=function(t){t()},e.prototype.closeSync=function(){},e}(c);e.NoSyncFile=p});var s=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};a("core/file_system",["require","exports","./api_error","./file_flag","./node_path","./buffer"],function(t,e,n,r,o,i){var a=n.ApiError;n.ErrorCode;var u=o.path,f=i.Buffer,c=function(){function t(){}return t.prototype.supportsLinks=function(){return!1},t.prototype.diskSpace=function(t,e){e(0,0)},t.prototype.open=function(t,e,n,r){r(new a(14))},t.prototype.rename=function(t,e,n){n(new a(14))},t.prototype.renameSync=function(){throw new a(14)},t.prototype.stat=function(t,e,n){n(new a(14))},t.prototype.statSync=function(){throw new a(14)},t.prototype.openSync=function(){throw new a(14)},t.prototype.unlink=function(t,e){e(new a(14))},t.prototype.unlinkSync=function(){throw new a(14)},t.prototype.rmdir=function(t,e){e(new a(14))},t.prototype.rmdirSync=function(){throw new a(14)},t.prototype.mkdir=function(t,e,n){n(new a(14))},t.prototype.mkdirSync=function(){throw new a(14)},t.prototype.readdir=function(t,e){e(new a(14))},t.prototype.readdirSync=function(){throw new a(14)},t.prototype.exists=function(t,e){this.stat(t,null,function(t){e(null==t)})},t.prototype.existsSync=function(t){try{return this.statSync(t,!0),!0}catch(e){return!1}},t.prototype.realpath=function(t,e,n){if(this.supportsLinks())for(var r=t.split(u.sep),o=0;o<r.length;o++){var i=r.slice(0,o+1);r[o]=u.join.apply(null,i)}else this.exists(t,function(e){e?n(null,t):n(new a(1,"File "+t+" not found."))})},t.prototype.realpathSync=function(t){if(!this.supportsLinks()){if(this.existsSync(t))return t;throw new a(1,"File "+t+" not found.")}for(var e=t.split(u.sep),n=0;n<e.length;n++){var r=e.slice(0,n+1);e[n]=u.join.apply(null,r)}},t.prototype.truncate=function(t,e,n){this.open(t,r.FileFlag.getFileFlag("w"),420,function(t,r){return t?n(t):(r.truncate(e,function(t){r.close(function(e){n(t||e)})}),void 0)})},t.prototype.truncateSync=function(t,e){var n=this.openSync(t,r.FileFlag.getFileFlag("w"),420);try{n.truncateSync(e)}catch(o){throw o}finally{n.closeSync()}},t.prototype.readFile=function(t,e,n,r){var o=r;this.open(t,n,420,function(t,n){return t?r(t):(r=function(t,e){n.close(function(n){return null==t&&(t=n),o(t,e)})},n.stat(function(t,o){if(null!=t)return r(t);var i=new f(o.size);n.read(i,0,o.size,0,function(t){if(null!=t)return r(t);if(null===e)return r(t,i);try{r(null,i.toString(e))}catch(n){r(n)}})}),void 0)})},t.prototype.readFileSync=function(t,e,n){var r=this.openSync(t,n,420);try{var o=r.statSync(),i=new f(o.size);return r.readSync(i,0,o.size,0),r.closeSync(),null===e?i:i.toString(e)}finally{r.closeSync()}},t.prototype.writeFile=function(t,e,n,r,o,i){var a=i;this.open(t,r,420,function(t,r){if(null!=t)return i(t);i=function(t){r.close(function(e){a(null!=t?t:e)})};try{"string"==typeof e&&(e=new f(e,n))}catch(o){return i(o)}r.write(e,0,e.length,0,i)})},t.prototype.writeFileSync=function(t,e,n,r,o){var i=this.openSync(t,r,o);try{"string"==typeof e&&(e=new f(e,n)),i.writeSync(e,0,e.length,0)}finally{i.closeSync()}},t.prototype.appendFile=function(t,e,n,r,o,i){var a=i;this.open(t,r,o,function(t,r){return null!=t?i(t):(i=function(t){r.close(function(e){a(null!=t?t:e)})},"string"==typeof e&&(e=new f(e,n)),r.write(e,0,e.length,null,i),void 0)})},t.prototype.appendFileSync=function(t,e,n,r,o){var i=this.openSync(t,r,o);try{"string"==typeof e&&(e=new f(e,n)),i.writeSync(e,0,e.length,null)}finally{i.closeSync()}},t.prototype.chmod=function(t,e,n,r){r(new a(14))},t.prototype.chmodSync=function(){throw new a(14)},t.prototype.chown=function(t,e,n,r,o){o(new a(14))},t.prototype.chownSync=function(){throw new a(14)},t.prototype.utimes=function(t,e,n,r){r(new a(14))},t.prototype.utimesSync=function(){throw new a(14)},t.prototype.link=function(t,e,n){n(new a(14))},t.prototype.linkSync=function(){throw new a(14)},t.prototype.symlink=function(t,e,n,r){r(new a(14))},t.prototype.symlinkSync=function(){throw new a(14)},t.prototype.readlink=function(t,e){e(new a(14))},t.prototype.readlinkSync=function(){throw new a(14)},t}();e.BaseFileSystem=c;var p=function(t){function e(){t.apply(this,arguments)}return s(e,t),e.prototype.supportsSynch=function(){return!0},e.prototype.rename=function(t,e,n){try{this.renameSync(t,e),n()}catch(r){n(r)}},e.prototype.stat=function(t,e,n){try{n(null,this.statSync(t,e))}catch(r){n(r)}},e.prototype.open=function(t,e,n,r){try{r(null,this.openSync(t,e,n))}catch(o){r(o)}},e.prototype.unlink=function(t,e){try{this.unlinkSync(t),e()}catch(n){e(n)}},e.prototype.rmdir=function(t,e){try{this.rmdirSync(t),e()}catch(n){e(n)}},e.prototype.mkdir=function(t,e,n){try{this.mkdirSync(t,e),n()}catch(r){n(r)}},e.prototype.readdir=function(t,e){try{e(null,this.readdirSync(t))}catch(n){e(n)}},e.prototype.chmod=function(t,e,n,r){try{this.chmodSync(t,e,n),r()}catch(o){r(o)}},e.prototype.chown=function(t,e,n,r,o){try{this.chownSync(t,e,n,r),o()}catch(i){o(i)}},e.prototype.utimes=function(t,e,n,r){try{this.utimesSync(t,e,n),r()}catch(o){r(o)}},e.prototype.link=function(t,e,n){try{this.linkSync(t,e),n()}catch(r){n(r)}},e.prototype.symlink=function(t,e,n,r){try{this.symlinkSync(t,e,n),r()}catch(o){r(o)}},e.prototype.readlink=function(t,e){try{e(null,this.readlinkSync(t))}catch(n){e(n)}},e}(c);e.SynchronousFileSystem=p}),a("core/node_fs_stats",["require","exports"],function(t,e){!function(t){t[t.FILE=32768]="FILE",t[t.DIRECTORY=16384]="DIRECTORY",t[t.SYMLINK=40960]="SYMLINK"}(e.FileType||(e.FileType={})),e.FileType;var n=function(){function t(t,e,n,r,o,i){if("undefined"==typeof r&&(r=new Date),"undefined"==typeof o&&(o=new Date),"undefined"==typeof i&&(i=new Date),this.size=e,this.mode=n,this.atime=r,this.mtime=o,this.ctime=i,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,null==this.mode)switch(t){case 32768:this.mode=420;break;case 16384:default:this.mode=511}this.blocks=Math.ceil(e/512),this.mode|=t}return t.prototype.clone=function(){return new t(61440&this.mode,this.size,4095&this.mode,this.atime,this.mtime,this.ctime)},t.prototype.isFile=function(){return 32768===(61440&this.mode)},t.prototype.isDirectory=function(){return 16384===(61440&this.mode)},t.prototype.isSymbolicLink=function(){return 40960===(61440&this.mode)},t.prototype.chmod=function(t){this.mode=61440&this.mode|t},t.prototype.isSocket=function(){return!1},t.prototype.isBlockDevice=function(){return!1},t.prototype.isCharacterDevice=function(){return!1},t.prototype.isFIFO=function(){return!1},t}();e.Stats=n}),function(){function t(t){var n=!1;return function(){if(n)throw new Error("Callback was already called.");n=!0,t.apply(e,arguments)}}var e,n,r={};e=this,null!=e&&(n=e.async),r.noConflict=function(){return e.async=n,r};var o=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n+=1)e(t[n],n,t)},i=function(t,e){if(t.map)return t.map(e);var n=[];return o(t,function(t,r,o){n.push(e(t,r,o))}),n},s=function(t,e,n){return t.reduce?t.reduce(e,n):(o(t,function(t,r,o){n=e(n,t,r,o)}),n)},u=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};r.nextTick="undefined"!=typeof process&&process.nextTick?process.nextTick:"function"==typeof setImmediate?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},r.each=function(e,n,r){if(r=r||function(){},!e.length)return r();
var i=0;o(e,function(o){n(o,t(function(t){t?(r(t),r=function(){}):(i+=1,i>=e.length&&r(null))}))})},r.forEach=r.each,r.eachSeries=function(t,e,n){if(n=n||function(){},!t.length)return n();var o=0,i=function(){var a=!0;e(t[o],function(e){e?(n(e),n=function(){}):(o+=1,o>=t.length?n(null):a?r.nextTick(i):i())}),a=!1};i()},r.forEachSeries=r.eachSeries,r.eachLimit=function(t,e,n,r){var o=f(e);o.apply(null,[t,n,r])},r.forEachLimit=r.eachLimit;var f=function(t){return function(e,n,r){if(r=r||function(){},!e.length||0>=t)return r();var o=0,i=0,a=0;!function s(){if(o>=e.length)return r();for(;t>a&&i<e.length;)i+=1,a+=1,n(e[i-1],function(t){t?(r(t),r=function(){}):(o+=1,a-=1,o>=e.length?r():s())})}()}},c=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[r.each].concat(e))}},p=function(t,e){return function(){var n=Array.prototype.slice.call(arguments);return e.apply(null,[f(t)].concat(n))}},l=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[r.eachSeries].concat(e))}},h=function(t,e,n,r){var o=[];e=i(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){n(t.value,function(n,r){o[t.index]=r,e(n)})},function(t){r(t,o)})};r.map=c(h),r.mapSeries=l(h),r.mapLimit=function(t,e,n,r){return d(e)(t,n,r)};var d=function(t){return p(t,h)};r.reduce=function(t,e,n,o){r.eachSeries(t,function(t,r){n(e,t,function(t,n){e=n,r(t)})},function(t){o(t,e)})},r.inject=r.reduce,r.foldl=r.reduce,r.reduceRight=function(t,e,n,o){var a=i(t,function(t){return t}).reverse();r.reduce(a,e,n,o)},r.foldr=r.reduceRight;var y=function(t,e,n,r){var o=[];e=i(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){n(t.value,function(n){n&&o.push(t),e()})},function(){r(i(o.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};r.filter=c(y),r.filterSeries=l(y),r.select=r.filter,r.selectSeries=r.filterSeries;var w=function(t,e,n,r){var o=[];e=i(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){n(t.value,function(n){n||o.push(t),e()})},function(){r(i(o.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};r.reject=c(w),r.rejectSeries=l(w);var g=function(t,e,n,r){t(e,function(t,e){n(t,function(n){n?(r(t),r=function(){}):e()})},function(){r()})};r.detect=c(g),r.detectSeries=l(g),r.some=function(t,e,n){r.each(t,function(t,r){e(t,function(t){t&&(n(!0),n=function(){}),r()})},function(){n(!1)})},r.any=r.some,r.every=function(t,e,n){r.each(t,function(t,r){e(t,function(t){t||(n(!1),n=function(){}),r()})},function(){n(!0)})},r.all=r.every,r.sortBy=function(t,e,n){r.map(t,function(t,n){e(t,function(e,r){e?n(e):n(null,{value:t,criteria:r})})},function(t,e){if(t)return n(t);var r=function(t,e){var n=t.criteria,r=e.criteria;return r>n?-1:n>r?1:0};n(null,i(e.sort(r),function(t){return t.value}))})},r.auto=function(t,e){e=e||function(){};var n=u(t);if(!n.length)return e(null);var i={},a=[],f=function(t){a.unshift(t)},c=function(t){for(var e=0;e<a.length;e+=1)if(a[e]===t)return a.splice(e,1),void 0},p=function(){o(a.slice(0),function(t){t()})};f(function(){u(i).length===n.length&&(e(null,i),e=function(){})}),o(n,function(n){var o=t[n]instanceof Function?[t[n]]:t[n],a=function(t){if(t)e(t),e=function(){};else{var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),i[n]=o,r.nextTick(p)}},u=o.slice(0,Math.abs(o.length-1))||[],l=function(){return s(u,function(t,e){return t&&i.hasOwnProperty(e)},!0)&&!i.hasOwnProperty(n)};if(l())o[o.length-1](a,i);else{var h=function(){l()&&(c(h),o[o.length-1](a,i))};f(h)}})},r.waterfall=function(t,e){if(e=e||function(){},!t.length)return e();var n=function(t){return function(o){if(o)e.apply(null,arguments),e=function(){};else{var i=Array.prototype.slice.call(arguments,1),a=t.next();a?i.push(n(a)):i.push(e),r.nextTick(function(){t.apply(null,i)})}}};n(r.iterator(t))()};var v=function(t,e,n){if(n=n||function(){},e.constructor===Array)t.map(e,function(t,e){t&&t(function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),e.call(null,t,n)})},n);else{var r={};t.each(u(e),function(t,n){e[t](function(e){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),r[t]=o,n(e)})},function(t){n(t,r)})}};r.parallel=function(t,e){v({map:r.map,each:r.each},t,e)},r.parallelLimit=function(t,e,n){v({map:d(e),each:f(e)},t,n)},r.series=function(t,e){if(e=e||function(){},t.constructor===Array)r.mapSeries(t,function(t,e){t&&t(function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),e.call(null,t,n)})},e);else{var n={};r.eachSeries(u(t),function(e,r){t[e](function(t){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),n[e]=o,r(t)})},function(t){e(t,n)})}},r.iterator=function(t){var e=function(n){var r=function(){return t.length&&t[n].apply(null,arguments),r.next()};return r.next=function(){return n<t.length-1?e(n+1):null},r};return e(0)},r.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var m=function(t,e,n,r){var o=[];t(e,function(t,e){n(t,function(t,n){o=o.concat(n||[]),e(t)})},function(t){r(t,o)})};r.concat=c(m),r.concatSeries=l(m),r.whilst=function(t,e,n){if(t()){var o=!0;e(function(i){return i?n(i):(o?r.nextTick(function(){r.whilst(t,e,n)}):r.whilst(t,e,n),void 0)}),o=!1}else n()},r.doWhilst=function(t,e,n){var o=!0;t(function(i){return i?n(i):(e()?o?r.nextTick(function(){r.doWhilst(t,e,n)}):r.doWhilst(t,e,n):n(),void 0)}),o=!1},r.until=function(t,e,n){if(t())n();else{var o=!0;e(function(i){return i?n(i):(o?r.nextTick(function(){r.until(t,e,n)}):r.until(t,e,n),void 0)}),o=!1}},r.doUntil=function(t,e,n){var o=!0;t(function(i){return i?n(i):(e()?n():o?r.nextTick(function(){r.doUntil(t,e,n)}):r.doUntil(t,e,n),void 0)}),o=!1},r.queue=function(e,n){function i(t,e,i,a){e.constructor!==Array&&(e=[e]),o(e,function(e){var o={data:e,callback:"function"==typeof a?a:null};i?t.tasks.unshift(o):t.tasks.push(o),t.saturated&&t.tasks.length===n&&t.saturated(),r.nextTick(t.process)})}var a=0,s={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,push:function(t,e){i(s,t,!1,e)},unshift:function(t,e){i(s,t,!0,e)},process:function(){if(a<s.concurrency&&s.tasks.length){var n=s.tasks.shift();s.empty&&0===s.tasks.length&&s.empty(),a+=1;var o=!0,i=function(){a-=1,n.callback&&n.callback.apply(n,arguments),s.drain&&0===s.tasks.length+a&&s.drain(),s.process()},u=t(function(){var t=arguments;o?r.nextTick(function(){i.apply(null,t)}):i.apply(null,arguments)});e(n.data,u),o=!1}},length:function(){return s.tasks.length},running:function(){return a}};return s},r.cargo=function(t,e){var n=!1,a=[],s={tasks:a,payload:e,saturated:null,empty:null,drain:null,push:function(t,n){t.constructor!==Array&&(t=[t]),o(t,function(t){a.push({data:t,callback:"function"==typeof n?n:null}),s.saturated&&a.length===e&&s.saturated()}),r.nextTick(s.process)},process:function u(){if(!n){if(0===a.length)return s.drain&&s.drain(),void 0;var r="number"==typeof e?a.splice(0,e):a.splice(0),f=i(r,function(t){return t.data});s.empty&&s.empty(),n=!0,t(f,function(){n=!1;var t=arguments;o(r,function(e){e.callback&&e.callback.apply(null,t)}),u()})}},length:function(){return a.length},running:function(){return n}};return s};var S=function(t){return function(e){var n=Array.prototype.slice.call(arguments,1);e.apply(null,n.concat([function(e){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&o(n,function(e){console[t](e)}))}]))}};r.log=S("log"),r.dir=S("dir"),r.memoize=function(t,e){var n={},r={};e=e||function(t){return t};var o=function(){var o=Array.prototype.slice.call(arguments),i=o.pop(),a=e.apply(null,o);a in n?i.apply(null,n[a]):a in r?r[a].push(i):(r[a]=[i],t.apply(null,o.concat([function(){n[a]=arguments;var t=r[a];delete r[a];for(var e=0,o=t.length;o>e;e++)t[e].apply(null,arguments)}])))};return o.memo=n,o.unmemoized=t,o},r.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},r.times=function(t,e,n){for(var o=[],i=0;t>i;i++)o.push(i);return r.map(o,e,n)},r.timesSeries=function(t,e,n){for(var o=[],i=0;t>i;i++)o.push(i);return r.mapSeries(o,e,n)},r.compose=function(){var t=Array.prototype.reverse.call(arguments);return function(){var e=this,n=Array.prototype.slice.call(arguments),o=n.pop();r.reduce(t,n,function(t,n,r){n.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);r(t,e)}]))},function(t,n){o.apply(e,[t].concat(n))})}},"undefined"!=typeof a&&a.amd?a("backend/../../vendor/async/lib/async",[],function(){return r}):"undefined"!=typeof module&&module.exports?module.exports=r:e.async=r}();var s=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};a("backend/dropbox",["require","exports","../generic/preload_file","../core/file_system","../core/node_fs_stats","../core/buffer","../core/api_error","../core/node_path","../core/browserfs","../core/buffer_core_arraybuffer","../../vendor/async/lib/async"],function(t,e,n,r,o,i,a,u,f,c){var p=i.Buffer,l=o.Stats,h=a.ApiError;a.ErrorCode;var d=u.path;o.FileType,window.db=window.Dropbox;var y=t("../../vendor/async/lib/async"),p=i.Buffer,w=function(t){function e(e,n,r,o,i){t.call(this,e,n,r,o,i)}return s(e,t),e.prototype.sync=function(t){var e=this._buffer,n=this._buffer.getBufferCore();n instanceof c.BufferCoreArrayBuffer||(e=new p(this._buffer.length),this._buffer.copy(e),n=e.getBufferCore());var r=n.getDataView(),o=new DataView(r.buffer,r.byteOffset+e.getOffset(),e.length);this._fs._writeFileStrict(this._path,o,t)},e.prototype.close=function(t){this.sync(t)},e}(n.PreloadFile);e.DropboxFile=w;var g=function(t){function e(e){t.call(this),this.client=e}return s(e,t),e.prototype.getName=function(){return"Dropbox"},e.isAvailable=function(){return"undefined"!=typeof db},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsSymlinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!1},e.prototype.empty=function(t){var e=this;e.client.readdir("/",function(n,r,o,i){if(n)t(e.convert(n));else{var a=function(t,n){e.client.remove(t.path,function(t){n(t?e.convert(t):t)})},s=function(n){n?t(e.convert(n)):t()};y.each(i,a,s)}})},e.prototype.rename=function(t,e,n){var r=this;r.client.move(t,e,function(r){if(r){var o=r.response.error.indexOf(t)>-1?t:e;n(new h(1,o+" doesn't exist"))}else n()})},e.prototype.stat=function(t,e,n){var r=this;r.client.stat(t,function(e,o){if(!(e||null!=o&&o.isRemoved)){var i=new l(r._statType(o),o.size);return n(null,i)}n(new h(1,t+" doesn't exist"))})},e.prototype.open=function(t,e,n,r){var o=this;o.client.readFile(t,{arrayBuffer:!0},function(n,i,a){if(!n){var s;s=null===i?new p(0):new p(i);var u=o._makeFile(t,e,a,s);return r(null,u)}if(e.isReadable())r(new h(1,t+" doesn't exist"));else switch(n.status){case 0:return console.error("No connection");case 404:var f=new ArrayBuffer(0);return o._writeFileStrict(t,f,function(n,i){if(n)r(n);else{var a=o._makeFile(t,e,i,new p(f));r(null,a)}});default:return console.log("Unhandled error: "+n)}})},e.prototype._writeFileStrict=function(t,e,n){var r=this,o=d.dirname(t);r.stat(o,!1,function(i){i?n(new h(1,"Can't create "+t+" because "+o+" doesn't exist")):r.client.writeFile(t,e,function(t,e){t?n(r.convert(t)):n(null,e)})})},e.prototype._statType=function(t){return t.isFile?32768:16384},e.prototype._makeFile=function(t,e,n,r){var o=this._statType(n),i=new l(o,n.size);return new w(this,t,e,i,r)},e.prototype._remove=function(t,e,n){var r=this;r.client.stat(t,function(o,i){o?e(new h(1,t+" doesn't exist")):i.isFile&&!n?e(new h(7,t+" is a file.")):!i.isFile&&n?e(new h(8,t+" is a directory.")):r.client.remove(t,function(n){n?e(new h(2,"Failed to remove "+t)):e(null)})})},e.prototype.unlink=function(t,e){this._remove(t,e,!0)},e.prototype.rmdir=function(t,e){this._remove(t,e,!1)},e.prototype.mkdir=function(t,e,n){var r=this,o=d.dirname(t);r.client.stat(o,function(e){e?n(new h(1,"Can't create "+t+" because "+o+" doesn't exist")):r.client.mkdir(t,function(e){e?n(new h(6,t+" already exists")):n(null)})})},e.prototype.readdir=function(t,e){var n=this;this.client.readdir(t,function(t,r){return t?e(n.convert(t)):e(null,r)})},e.prototype.convert=function(t,e){switch("undefined"==typeof e&&(e=""),t.status){case 400:return new h(9,e);case 401:case 403:return new h(2,e);case 404:return new h(1,e);case 405:return new h(14,e);case 0:case 304:case 406:case 409:default:return new h(2,e)}},e}(r.BaseFileSystem);e.Dropbox=g,f.registerFileSystem("Dropbox",g)});var s=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};a("backend/html5fs",["require","exports","../generic/preload_file","../core/file_system","../core/api_error","../core/file_flag","../core/node_fs_stats","../core/buffer","../core/browserfs","../core/buffer_core_arraybuffer","../../vendor/async/lib/async"],function(t,e,n,r,o,i,a,u,f,c){function p(t,e,n,r){if("undefined"!=typeof navigator.webkitPersistentStorage)switch(t){case window.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(e,n,r);break;case window.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(e,n,r);break;default:r(null)}else window.webkitStorageInfo.requestQuota(t,e,n,r)}function l(t){return Array.prototype.slice.call(t||[],0)}var h=u.Buffer,d=a.Stats;a.FileType;var y=o.ApiError;o.ErrorCode,i.ActionType;var w=t("../../vendor/async/lib/async"),g=window.webkitRequestFileSystem||window.requestFileSystem||null,v=function(t){function e(e,n,r,o,i){t.call(this,e,n,r,o,i)}return s(e,t),e.prototype.sync=function(t){var e=this,n={create:!1},r=this._fs,o=function(n){n.createWriter(function(n){var o=e._buffer,i=e._buffer.getBufferCore();i instanceof c.BufferCoreArrayBuffer||(o=new h(e._buffer.length),e._buffer.copy(o),i=o.getBufferCore());var a=i.getDataView(),s=new DataView(a.buffer,a.byteOffset+o.getOffset(),o.length),u=new Blob([s]),f=u.size;n.onwriteend=function(){n.onwriteend=null,n.truncate(f),t()},n.onerror=function(e){t(r.convert(e))},n.write(u)})},i=function(e){t(r.convert(e))};r.fs.root.getFile(this._path,n,o,i)},e.prototype.close=function(t){this.sync(t)},e}(n.PreloadFile);e.HTML5FSFile=v;var m=function(t){function e(e,n){t.call(this),this.size=null!=e?e:5,this.type=null!=n?n:window.PERSISTENT;var r=1024,o=r*r;this.size*=o}return s(e,t),e.prototype.getName=function(){return"HTML5 FileSystem"},e.isAvailable=function(){return null!=g},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsSymlinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!1},e.prototype.convert=function(t,e){switch("undefined"==typeof e&&(e=""),t.name){case"QuotaExceededError":return new y(11,e);case"NotFoundError":return new y(1,e);case"SecurityError":return new y(4,e);case"SyntaxError":case"TypeMismatchError":return new y(9,e);default:return console.log("Unknown Error: "+t.name),new y(9,e)}},e.prototype.convertErrorEvent=function(t,e){return"undefined"==typeof e&&(e=""),new y(1,t.message+"; "+e)},e.prototype.allocate=function(t){"undefined"==typeof t&&(t=function(){});var e=this,n=function(n){e.fs=n,t()},r=function(n){t(e.convert(n))};this.type===window.PERSISTENT?p(this.type,this.size,function(t){g(this.type,t,n,r)},r):g(this.type,this.size,n,r)},e.prototype.empty=function(t){var e=this;e._readdir("/",function(n,r){if(n)console.error("Failed to empty FS"),t(n);else{var o=function(){n?(console.error("Failed to empty FS"),t(n)):t()},i=function(t,n){var r=function(){n()},o=function(r){n(e.convert(r,t.fullPath))};t.isFile?t.remove(r,o):t.removeRecursively(r,o)};w.each(r,i,o)}})},e.prototype.rename=function(t,e,n){var r=this,o=function(r){r.moveTo(t,e),n()},i=function(o){n(r.convert(o,"Failed to rename "+t+" to "+e+"."))};this.fs.root.getFile(t,{},o,i)},e.prototype.stat=function(t,e,n){var r=this,o={create:!1},i=function(t){var e=function(t){var e=new d(32768,t.size);n(null,e)};t.file(e,s)},a=function(){var t=4096,e=new d(16384,t);n(null,e)},s=function(e){n(r.convert(e,t))},u=function(){r.fs.root.getDirectory(t,o,a,s)};this.fs.root.getFile(t,o,i,u)},e.prototype.open=function(t,e,n,r){var o=this,i={create:3===e.pathNotExistsAction(),exclusive:e.isExclusive()},a=function(e){r(o.convertErrorEvent(e,t))},s=function(e){r(o.convert(e,t))},u=function(n){var i=function(n){var i=new FileReader;i.onloadend=function(){var a=o._makeFile(t,e,n,i.result);r(null,a)},i.onerror=a,i.readAsArrayBuffer(n)};n.file(i,s)};this.fs.root.getFile(t,i,u,a)},e.prototype._statType=function(t){return t.isFile?32768:16384},e.prototype._makeFile=function(t,e,n,r){"undefined"==typeof r&&(r=new ArrayBuffer(0));var o=new d(32768,n.size),i=new h(r);return new v(this,t,e,o,i)},e.prototype._remove=function(t,e,n){var r=this,o=function(n){var o=function(){e()},i=function(n){e(r.convert(n,t))};n.remove(o,i)},i=function(n){e(r.convert(n,t))},a={create:!1};n?this.fs.root.getFile(t,a,o,i):this.fs.root.getDirectory(t,a,o,i)},e.prototype.unlink=function(t,e){this._remove(t,e,!0)},e.prototype.rmdir=function(t,e){this._remove(t,e,!1)},e.prototype.mkdir=function(t,e,n){var r=this,o={create:!0,exclusive:!0},i=function(){n()},a=function(e){n(r.convert(e,t))};this.fs.root.getDirectory(t,o,i,a)},e.prototype._readdir=function(t,e){var n=this,r=this.fs.root.createReader(),o=[],i=function(r){e(n.convert(r,t))},a=function(){r.readEntries(function(t){t.length?(o=o.concat(l(t)),a()):e(null,o)},i)};a()},e.prototype.readdir=function(t,e){this._readdir(t,function(t,n){if(null!=t)return e(t);for(var r=[],o=0;o<n.length;o++)r.push(n[o].name);e(null,r)})},e}(r.BaseFileSystem);e.HTML5FS=m,f.registerFileSystem("HTML5FS",m)}),a("generic/file_index",["require","exports","../core/node_fs_stats","../core/node_path"],function(t,e,n,r){var o=n.Stats,i=r.path,a=function(){function t(){this._index={},this.addPath("/",new u)}return t.prototype._split_path=function(t){var e=i.dirname(t),n=t.substr(e.length+("/"===e?0:1));return[e,n]},t.prototype.fileIterator=function(t){for(var e in this._index)for(var n=this._index[e],r=n.getListing(),o=0;o<r.length;o++){var i=n.getItem(r[o]);i.isFile()&&t(i.getData())}},t.prototype.addPath=function(t,e){if(null==e)throw new Error("Inode must be specified");if("/"!==t[0])throw new Error("Path must be absolute, got: "+t);if(this._index.hasOwnProperty(t))return this._index[t]===e;var n=this._split_path(t),r=n[0],o=n[1],i=this._index[r];return void 0!==i||"/"===t||(i=new u,this.addPath(r,i))?"/"===t||i.addItem(o,e)?(e.isFile()||(this._index[t]=e),!0):!1:!1},t.prototype.removePath=function(t){var e=this._split_path(t),n=e[0],r=e[1],o=this._index[n];if(void 0===o)return null;var i=o.remItem(r);if(null===i)return null;if(!i.isFile()){for(var a=i,s=a.getListing(),u=0;u<s.length;u++)this.removePath(t+"/"+s[u]);"/"!==t&&delete this._index[t]}return i},t.prototype.ls=function(t){var e=this._index[t];return void 0===e?null:e.getListing()},t.prototype.getInode=function(t){var e=this._split_path(t),n=e[0],r=e[1],o=this._index[n];return void 0===o?null:n===t?o:o.getItem(r)},t.from_listing=function(e){var n=new t,r=new u;n._index["/"]=r;for(var i=[["",e,r]];i.length>0;){var a,f=i.pop(),c=f[0],p=f[1],l=f[2];for(var h in p){var d=p[h],y=""+c+"/"+h;null!=d?(n._index[y]=a=new u,i.push([y,d,a])):a=new s(new o(32768,-1)),null!=l&&(l._ls[h]=a)}}return n},t}();e.FileIndex=a;var s=function(){function t(t){this.data=t}return t.prototype.isFile=function(){return!0},t.prototype.isDir=function(){return!1},t.prototype.getData=function(){return this.data},t.prototype.setData=function(t){this.data=t},t}();e.FileInode=s;var u=function(){function t(){this._ls={}}return t.prototype.isFile=function(){return!1},t.prototype.isDir=function(){return!0},t.prototype.getStats=function(){return new o(16384,4096)},t.prototype.getListing=function(){return Object.keys(this._ls)},t.prototype.getItem=function(t){var e;return null!=(e=this._ls[t])?e:null},t.prototype.addItem=function(t,e){return t in this._ls?!1:(this._ls[t]=e,!0)},t.prototype.remItem=function(t){var e=this._ls[t];return void 0===e?null:(delete this._ls[t],e)},t}();e.DirInode=u});var s=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};a("generic/indexed_filesystem",["require","exports","../core/file_system","./file_index","../core/file_flag","../core/node_fs_stats","../core/api_error","../core/node_path"],function(t,e,n,r,o,i,a,u){var f=a.ApiError;a.ErrorCode,o.ActionType,i.FileType;var c=i.Stats,p=o.FileFlag,l=u.path,h=r.DirInode,d=function(t){function e(e){t.call(this),this._index=e}return s(e,t),e.prototype.renameSync=function(t,e){var n=this._index.removePath(t);if(null===n)throw new f(1,""+t+" not found.");this._index.removePath(e),this._index.addPath(e,n)},e.prototype.statSync=function(t){var e=this._index.getInode(t);if(null===e)throw new f(1,""+t+" not found.");return e.isDir()?e.getStats():e.getData()},e.prototype.openSync=function(t,e,n){var o=this._index.getInode(t);if(null!==o){if(!o.isFile())throw new f(8,""+t+" is a directory.");var i=o.getData();switch(e.pathExistsAction()){case 1:throw new f(6,""+t+" already exists.");case 2:return this._truncate(t,e,i);case 0:return this._fetch(t,e,i);default:throw new f(9,"Invalid FileFlag object.")}}else switch(e.pathNotExistsAction()){case 3:var a=l.dirname(t),s=this._index.getInode(a);if(null===s||s.isFile())throw new f(1,""+a+" doesn't exist.");var u=new r.FileInode(new c(32768,0,n));return this._create(t,e,u);case 1:throw new f(1,""+t+" doesn't exist.");default:throw new f(9,"Invalid FileFlag object.")}},e.prototype.unlinkSync=function(t){var e=this._index.getInode(t);if(null===e)throw new f(1,""+t+" not found.");if(!e.isFile())throw new f(8,""+t+" is a directory, not a file.");this._index.removePath(t)},e.prototype.rmdirSync=function(t){var e=this._index.getInode(t);if(null===e)throw new f(1,""+t+" not found.");if(e.isFile())throw new f(7,""+t+" is a file, not a directory.");this._index.removePath(t),this._rmdirSync(t,e)},e.prototype.mkdirSync=function(t){var e=this._index.getInode(t);if(null!==e)throw new f(6,""+t+" already exists.");var n=l.dirname(t);if("/"!==n&&null===this._index.getInode(n))throw new f(1,"Can't create "+t+" because "+n+" doesn't exist.");var r=this._index.addPath(t,new h);if(!r)throw new f(9,"Could not add "+l+" for some reason.")},e.prototype.readdirSync=function(t){var e=this._index.getInode(t);if(null===e)throw new f(1,""+t+" not found.");if(e.isFile())throw new f(7,""+t+" is a file, not a directory.");return e.getListing()},e.prototype.chmodSync=function(t,e,n){var r=this.openSync(t,p.getFileFlag("r+"),420);r._stat.chmod(n),r.closeSync()},e.prototype.chownSync=function(t,e,n,r){var o=this.openSync(t,p.getFileFlag("r+"),420);o._stat.uid=n,o._stat.gid=r,o.closeSync()},e.prototype.utimesSync=function(t,e,n){var r=this.openSync(t,p.getFileFlag("r+"),420);r._stat.atime=e,r._stat.mtime=n,r.closeSync()},e.prototype._rmdirSync=function(){throw new f(14,"_rmdirSync is not implemented.")},e.prototype._create=function(){throw new f(14,"_create is not implemented.")},e.prototype._fetch=function(){throw new f(14,"_fetch is not implemented.")},e.prototype._truncate=function(){throw new f(14,"_truncate is not implemented.")},e}(n.SynchronousFileSystem);e.IndexedFileSystem=d}),a("core/util",["require","exports"],function(t,e){function n(t){var e,n,r,o,i,a;for(r=[],i=[t],e=0;0!==i.length;)if(a=i.pop(),"boolean"==typeof a)e+=4;else if("string"==typeof a)e+=2*a.length;else if("number"==typeof a)e+=8;else if("object"==typeof a&&r.indexOf(a)<0){r.push(a),e+=4;for(n in a)o=a[n],e+=2*n.length,i.push(o)}return e}e.roughSizeOfObject=n,e.isIE=null!=/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||-1!==navigator.userAgent.indexOf("Trident")});var s=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};a("backend/in_memory",["require","exports","../generic/indexed_filesystem","../generic/file_index","../core/buffer","../generic/preload_file","../core/util","../core/browserfs"],function(t,e,n,r,o,i,a,u){var f=o.Buffer,c=i.NoSyncFile,p=function(t){function e(){t.call(this,new r.FileIndex)}return s(e,t),e.prototype.empty=function(){this._index=new r.FileIndex},e.prototype.getName=function(){return"In-memory"},e.isAvailable=function(){return!0},e.prototype.diskSpace=function(t,e){return e(1/0,a.roughSizeOfObject(this._index))},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype._truncate=function(t,e,n){n.size=0,n.mtime=new Date;var r=n.file_data;return r._flag=e,r._buffer=new f(0),r},e.prototype._fetch=function(t,e,n){var r=n.file_data;return r._flag=e,r},e.prototype._create=function(t,e,n){var r=n.getData(),o=new c(this,t,e,r);return r.file_data=o,this._index.addPath(t,n),o},e.prototype._rmdirSync=function(){},e}(n.IndexedFileSystem);e.InMemory=p,u.registerFileSystem("InMemory",p)});var s=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};a("backend/localStorage",["require","exports","../generic/indexed_filesystem","../generic/preload_file","../core/node_fs_stats","../core/buffer","../generic/file_index","../core/string_util","../core/api_error","../core/node_path","../core/browserfs"],function(t,e,n,r,o,i,a,u,f,c,p){var l=i.Buffer,h=o.Stats;o.FileType;var d=f.ApiError;f.ErrorCode;var y=c.path,w=function(t){function e(){t.call(this,new a.FileIndex);for(var e=0;e<window.localStorage.length;e++){var n=window.localStorage.key(e);if("/"===n[0]){var r=window.localStorage.getItem(n);null==r&&(r="");var o=this._getFileLength(r),i=new a.FileInode(new h(32768,o));this._index.addPath(n,i)}}}return s(e,t),e.prototype._getFile=function(t,e,n){var r=window.localStorage.getItem(t);return null===r?null:this._convertFromBinaryString(t,r,e,n)},e.prototype._syncSync=function(t,e,n){var r=this._convertToBinaryString(e,n);try{window.localStorage.setItem(t,r),this._index.addPath(t,new a.FileInode(n))}catch(o){throw new d(11,"Unable to sync "+t)}},e.prototype.empty=function(){window.localStorage.clear(),this._index=new a.FileIndex},e.prototype.getName=function(){return"localStorage"},e.isAvailable=function(){return"undefined"!=typeof window&&null!==window&&"undefined"!=typeof window.localStorage},e.prototype.diskSpace=function(t,e){for(var n=5242880,r=0,o=0;o<window.localStorage.length;o++){var i=window.localStorage.key(o);r+=2*i.length;var a=window.localStorage.getItem(i);r+=2*a.length}if("undefined"!=typeof window.localStorage.remainingSpace){var s=window.localStorage.remainingSpace;n=r+s}e(n,r)},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return!0},e.prototype.unlinkSync=function(e){t.prototype.unlinkSync.call(this,e),window.localStorage.removeItem(e)},e.prototype._truncate=function(t,e,n){return n.size=0,new m(this,t,e,n)},e.prototype._fetch=function(t,e,n){return this._getFile(t,e,n)},e.prototype._create=function(t,e,n){return new m(this,t,e,n.getData())},e.prototype._rmdirSync=function(t,e){for(var n=e.getListing(),r=y.sep,o=0;o<n.length;o++){var i=n[o];window.localStorage.removeItem(""+t+r+i)}},e.prototype._convertToBinaryString=function(){throw new d(14,"LocalStorageAbstract is an abstract class.")},e.prototype._convertFromBinaryString=function(){throw new d(14,"LocalStorageAbstract is an abstract class.")},e.prototype._getFileLength=function(){throw new d(14,"LocalStorageAbstract is an abstract class.")},e}(n.IndexedFileSystem);e.LocalStorageAbstract=w;var g=function(t){function e(){t.call(this)}return s(e,t),e.prototype._convertToBinaryString=function(t,e){var n=t.toString("binary_string"),r=new l(18);r.writeUInt16BE(e.mode,0),r.writeDoubleBE(e.mtime.getTime(),2),r.writeDoubleBE(e.atime.getTime(),10);var o=r.toString("binary_string");return n=o+n},e.prototype._convertFromBinaryString=function(t,e,n,r){var o=new l(e.substr(0,10),"binary_string");e=e.substr(10);var i=new l(e,"binary_string"),a=new m(this,t,n,r,i);return a._stat.mode=o.readUInt16BE(0),a._stat.mtime=new Date(o.readDoubleBE(2)),a._stat.atime=new Date(o.readDoubleBE(10)),a},e.prototype._getFileLength=function(t){return t.length>10?u.FindUtil("binary_string").byteLength(t.substr(10)):0},e}(w);e.LocalStorageModern=g;var v=function(t){function e(){t.call(this)}return s(e,t),e.prototype._convertToBinaryString=function(t,e){var n=t.toString("binary_string_ie"),r=new l(18);r.writeUInt16BE(e.mode,0),r.writeDoubleBE(e.mtime.getTime(),2),r.writeDoubleBE(e.atime.getTime(),10);var o=r.toString("binary_string_ie");return n=o+n},e.prototype._convertFromBinaryString=function(t,e,n,r){var o=new l(e.substr(0,18),"binary_string_ie");e=e.substr(18);var i=new l(e,"binary_string_ie"),a=new m(this,t,n,r,i);return a._stat.mode=o.readUInt16BE(0),a._stat.mtime=new Date(o.readDoubleBE(2)),a._stat.atime=new Date(o.readDoubleBE(10)),a},e.prototype._getFileLength=function(t){return t.length>0?t.length-18:0},e}(w);e.LocalStorageOld=v;var m=function(t){function e(e,n,r,o,i){t.call(this,e,n,r,o,i)}return s(e,t),e.prototype.syncSync=function(){this._fs._syncSync(this._path,this._buffer,this._stat)},e.prototype.closeSync=function(){this.syncSync()},e}(r.PreloadFile);e.LocalStorageFile=m;var S=!1;try{window.localStorage.setItem("__test__",String.fromCharCode(55296)),S=window.localStorage.getItem("__test__")===String.fromCharCode(55296)}catch(b){S=!1}e.LocalStorage=S?g:v,p.registerFileSystem("LocalStorage",e.LocalStorage)});var s=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};a("backend/mountable_file_system",["require","exports","../core/file_system","./in_memory","../core/api_error","../core/node_fs","../core/browserfs"],function(t,e,n,r,o,i,a){function u(t,e){return e?function(){for(var e=[],n=0;n<arguments.length-0;n++)e[n]=arguments[n+0];var r=e[0],o=this._get_fs(r);e[0]=o.path;try{return o.fs[t].apply(o.fs,e)}catch(i){throw this.standardizeError(i,o.path,r),i}}:function(){for(var e=[],n=0;n<arguments.length-0;n++)e[n]=arguments[n+0];var r=e[0],i=this._get_fs(r);if(e[0]=i.path,"function"==typeof e[e.length-1]){var a=e[e.length-1],s=this;e[e.length-1]=function(){for(var t=[],e=0;e<arguments.length-0;e++)t[e]=arguments[e+0];t.length>0&&t[0]instanceof o.ApiError&&s.standardizeError(t[0],i.path,r),a.apply(null,t)}}return i.fs[t].apply(i.fs,e)}}var f=o.ApiError;o.ErrorCode;var c=i.fs,p=function(t){function e(){t.call(this),this.mntMap={},this.rootFs=new r.InMemory}return s(e,t),e.prototype.mount=function(t,e){if(this.mntMap[t])throw new f(9,"Mount point "+t+" is already taken.");this.rootFs.mkdirSync(t,511),this.mntMap[t]=e},e.prototype.umount=function(t){if(!this.mntMap[t])throw new f(9,"Mount point "+t+" is already unmounted.");delete this.mntMap[t],this.rootFs.rmdirSync(t)},e.prototype._get_fs=function(t){for(var e in this.mntMap){var n=this.mntMap[e];if(0===t.indexOf(e))return t=t.substr(e.length>1?e.length:0),""===t&&(t="/"),{fs:n,path:t}}return{fs:this.rootFs,path:t}},e.prototype.getName=function(){return"MountableFileSystem"},e.isAvailable=function(){return!0},e.prototype.diskSpace=function(t,e){e(0,0)},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!0},e.prototype.standardizeError=function(t,e,n){var r;return-1!==(r=t.message.indexOf(e))&&(t.message=t.message.substr(0,r)+n+t.message.substr(r+e.length)),t},e.prototype.rename=function(t,e,n){var r=this._get_fs(t),o=this._get_fs(e);
if(r.fs===o.fs){var i=this;return r.fs.rename(r.path,o.path,function(a){a&&i.standardizeError(i.standardizeError(a,r.path,t),o.path,e),n(a)})}return c.readFile(t,function(r,o){return r?n(r):(c.writeFile(e,o,function(e){return e?n(e):(c.unlink(t,n),void 0)}),void 0)})},e.prototype.renameSync=function(t,e){var n=this._get_fs(t),r=this._get_fs(e);if(n.fs===r.fs)try{return n.fs.renameSync(n.path,r.path)}catch(o){throw this.standardizeError(this.standardizeError(o,n.path,t),r.path,e),o}var i=c.readFileSync(t);return c.writeFileSync(e,i),c.unlinkSync(t)},e}(n.BaseFileSystem);e.MountableFileSystem=p;for(var l=[["readdir","exists","unlink","rmdir","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],h=0;h<l.length;h++)for(var d=l[h],y=0;y<d.length;y++){var w=d[y];p.prototype[w]=u(w,!1,h+1),p.prototype[w+"Sync"]=u(w+"Sync",!0,h+1)}a.registerFileSystem("MountableFileSystem",p)}),a("generic/xhr",["require","exports","../core/util","../core/buffer","../core/api_error"],function(t,e,n,r,o){function i(t){for(var e=IEBinaryToArray_ByteStr(t),n=IEBinaryToArray_ByteStr_Last(t),r=e.replace(/[\s\S]/g,function(t){var e=t.charCodeAt(0);return String.fromCharCode(255&e,e>>8)})+n,o=new Array(r.length),i=0;i<r.length;i++)o[i]=r.charCodeAt(i);return o}function a(t,e,n,r){switch(n){case"buffer":case"json":break;default:return r(new y(9,"Invalid download type: "+n))}var o=new XMLHttpRequest;o.open("GET",e,t),o.setRequestHeader("Accept-Charset","x-user-defined"),o.onreadystatechange=function(){var t;if(4===o.readyState){if(200!==o.status)return r(new y(o.status,"XHR error."));switch(n){case"buffer":return t=i(o.responseBody),r(null,new w(t));case"json":return r(null,JSON.parse(o.responseText))}}},o.send()}function s(t,e,n){a(!0,t,e,n)}function u(t,e){var n;return a(!1,t,e,function(t,e){if(t)throw t;n=e}),n}function f(t,e,n){var r=new XMLHttpRequest;r.open("GET",t,!0);var o=!0;switch(e){case"buffer":r.responseType="arraybuffer";break;case"json":try{r.responseType="json",o="json"===r.responseType}catch(i){o=!1}break;default:return n(new y(9,"Invalid download type: "+e))}r.onreadystatechange=function(){if(4===r.readyState){if(200!==r.status)return n(new y(r.status,"XHR error."));switch(e){case"buffer":return n(null,new w(r.response?r.response:0));case"json":return o?n(null,r.response):n(null,JSON.parse(r.responseText))}}},r.send()}function c(t,e){var n=new XMLHttpRequest;n.open("GET",t,!1);var r=null,o=null;if(n.overrideMimeType("text/plain; charset=x-user-defined"),n.onreadystatechange=function(){if(4===n.readyState){if(200!==n.status)return o=new y(n.status,"XHR error."),void 0;switch(e){case"buffer":var t=n.responseText;r=new w(t.length);for(var i=0;i<t.length;i++)r.writeUInt8(t.charCodeAt(i),i);return;case"json":return r=JSON.parse(n.responseText),void 0}}},n.send(),o)throw o;return r}function p(t,e){var n=new XMLHttpRequest;switch(n.open("GET",t,!1),e){case"buffer":n.responseType="arraybuffer";break;case"json":break;default:throw new y(9,"Invalid download type: "+e)}var r,o;if(n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status)switch(e){case"buffer":r=new w(n.response);break;case"json":r=JSON.parse(n.response)}else o=new y(n.status,"XHR error.")},n.send(),o)throw o;return r}function l(t,e,n){var r=new XMLHttpRequest;r.open("HEAD",e,t),r.onreadystatechange=function(){if(4===r.readyState){if(200!=r.status)return n(new y(r.status,"XHR HEAD error."));try{return n(null,parseInt(r.getResponseHeader("Content-Length"),10))}catch(t){return n(new y(2,"XHR HEAD error: Could not read content-length."))}}},r.send()}function h(t){var e;return l(!1,t,function(t,n){if(t)throw t;e=n}),e}function d(t,e){l(!0,t,e)}var y=o.ApiError;o.ErrorCode;var w=r.Buffer;e.asyncDownloadFile=n.isIE&&"undefined"==typeof Blob?s:f,e.syncDownloadFile=n.isIE&&"undefined"==typeof Blob?u:n.isIE&&"undefined"!=typeof Blob?p:c,e.getFileSizeSync=h,e.getFileSizeAsync=d});var s=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};a("backend/XmlHttpRequest",["require","exports","../core/file_system","../generic/file_index","../core/buffer","../core/api_error","../core/file_flag","../generic/preload_file","../core/browserfs","../generic/xhr"],function(t,e,n,r,o,i,a,u,f,c){o.Buffer;var p=i.ApiError;i.ErrorCode;var l=a.FileFlag;a.ActionType;var h=function(t){function e(e,n){t.call(this),null==e&&(e="index.json"),this.prefix_url=null!=n?n:"";var o=this._requestFileSync(e,"json");if(null==o)throw new Error("Unable to find listing at URL: "+e);this._index=r.FileIndex.from_listing(o)}return s(e,t),e.prototype.empty=function(){this._index.fileIterator(function(t){t.file_data=null})},e.prototype._requestFileSizeAsync=function(t,e){c.getFileSizeAsync(this.prefix_url+t,e)},e.prototype._requestFileSizeSync=function(t){return c.getFileSizeSync(this.prefix_url+t)},e.prototype._requestFileAsync=function(t,e,n){c.asyncDownloadFile(this.prefix_url+t,e,n)},e.prototype._requestFileSync=function(t,e){return c.syncDownloadFile(this.prefix_url+t,e)},e.prototype.getName=function(){return"XmlHttpRequest"},e.isAvailable=function(){return"undefined"!=typeof XMLHttpRequest&&null!==XMLHttpRequest},e.prototype.diskSpace=function(t,e){e(0,0)},e.prototype.isReadOnly=function(){return!0},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!0},e.prototype.preloadFile=function(t,e){var n=this._index.getInode(t);if(null===n)throw new p(1,""+t+" not found.");var r=n.getData();r.size=e.length,r.file_data=new u.NoSyncFile(this,t,l.getFileFlag("r"),r,e)},e.prototype.stat=function(t,e,n){var r=this._index.getInode(t);if(null===r)return n(new p(1,""+t+" not found."));var o;r.isFile()?(o=r.getData(),o.size<0?this._requestFileSizeAsync(t,function(t,e){return t?n(t):(o.size=e,n(null,o),void 0)}):n(null,o)):(o=r.getStats(),n(null,o))},e.prototype.statSync=function(t){var e=this._index.getInode(t);if(null===e)throw new p(1,""+t+" not found.");var n;return e.isFile()?(n=e.getData(),n.size<0&&(n.size=this._requestFileSizeSync(t))):n=e.getStats(),n},e.prototype.open=function(t,e,n,r){var o=this,i=this._index.getInode(t);if(null===i)return r(new p(1,""+t+" is not in the FileIndex."));if(i.isDir())return r(new p(8,""+t+" is a directory."));var a=i.getData();switch(e.pathExistsAction()){case 1:case 2:return r(new p(6,""+t+" already exists."));case 0:if(null!=a.file_data)return r(null,a.file_data);this._requestFileAsync(t,"buffer",function(n,i){return n?r(n):(a.size=i.length,a.file_data=new u.NoSyncFile(o,t,e,a,i),r(null,a.file_data))});break;default:return r(new p(9,"Invalid FileMode object."))}},e.prototype.openSync=function(t,e){var n=this._index.getInode(t);if(null===n)throw new p(1,""+t+" is not in the FileIndex.");if(n.isDir())throw new p(8,""+t+" is a directory.");var r=n.getData();switch(e.pathExistsAction()){case 1:case 2:throw new p(6,""+t+" already exists.");case 0:if(null!=r.file_data)return r.file_data;var o=this._requestFileSync(t,"buffer");return r.size=o.length,r.file_data=new u.NoSyncFile(this,t,e,r,o),r.file_data;default:throw new p(9,"Invalid FileMode object.")}},e.prototype.readdir=function(t,e){try{e(null,this.readdirSync(t))}catch(n){e(n)}},e.prototype.readdirSync=function(t){var e=this._index.getInode(t);if(null===e)throw new p(1,""+t+" not found.");if(e.isFile())throw new p(7,""+t+" is a file, not a directory.");return e.getListing()},e.prototype.readFile=function(t,e,n,r){var i=r;this.open(t,n,420,function(t,n){if(t)return r(t);r=function(t,e){n.close(function(n){return null==t&&(t=n),i(t,e)})};var a=n,s=a._buffer;if(null===e)return s.length>0?r(t,s.sliceCopy()):r(t,new o.Buffer(0));try{r(null,s.toString(e))}catch(u){r(u)}})},e.prototype.readFileSync=function(t,e,n){var r=this.openSync(t,n,420);try{var i=r,a=i._buffer;return null===e?a.length>0?a.sliceCopy():new o.Buffer(0):a.toString(e)}finally{r.closeSync()}},e}(n.BaseFileSystem);e.XmlHttpRequest=h,f.registerFileSystem("XmlHttpRequest",h)}),function(){function t(t,e){var n=t.split("."),r=s;!(n[0]in r)&&r.execScript&&r.execScript("var "+n[0]);for(var o;n.length&&(o=n.shift());)n.length||e===a?r=r[o]?r[o]:r[o]={}:r[o]=e}function e(t){var e,n,r,o,i,a,s,f,c,p=t.length,l=0,h=Number.POSITIVE_INFINITY;for(f=0;p>f;++f)t[f]>l&&(l=t[f]),t[f]<h&&(h=t[f]);for(e=1<<l,n=new(u?Uint32Array:Array)(e),r=1,o=0,i=2;l>=r;){for(f=0;p>f;++f)if(t[f]===r){for(a=0,s=o,c=0;r>c;++c)a=a<<1|1&s,s>>=1;for(c=a;e>c;c+=i)n[c]=r<<16|f;++o}++r,o<<=1,i<<=1}return[n,l,h]}function n(t,e){switch(this.g=[],this.h=32768,this.c=this.f=this.d=this.k=0,this.input=u?new Uint8Array(t):t,this.l=!1,this.i=c,this.p=!1,(e||!(e={}))&&(e.index&&(this.d=e.index),e.bufferSize&&(this.h=e.bufferSize),e.bufferType&&(this.i=e.bufferType),e.resize&&(this.p=e.resize)),this.i){case f:this.a=32768,this.b=new(u?Uint8Array:Array)(32768+this.h+258);break;case c:this.a=0,this.b=new(u?Uint8Array:Array)(this.h),this.e=this.u,this.m=this.r,this.j=this.s;break;default:throw Error("invalid inflate mode")}}function r(t,e){for(var n,r=t.f,o=t.c,i=t.input,s=t.d;e>o;){if(n=i[s++],n===a)throw Error("input buffer is broken");r|=n<<o,o+=8}return n=r&(1<<e)-1,t.f=r>>>e,t.c=o-e,t.d=s,n}function o(t,e){for(var n,r,o,i=t.f,s=t.c,u=t.input,f=t.d,c=e[0],p=e[1];p>s&&(n=u[f++],n!==a);)i|=n<<s,s+=8;return r=c[i&(1<<p)-1],o=r>>>16,t.f=i>>o,t.c=s-o,t.d=f,65535&r}function i(t){function n(t,e,n){var i,a,s,u;for(u=0;t>u;)switch(i=o(this,e)){case 16:for(s=3+r(this,2);s--;)n[u++]=a;break;case 17:for(s=3+r(this,3);s--;)n[u++]=0;a=0;break;case 18:for(s=11+r(this,7);s--;)n[u++]=0;a=0;break;default:a=n[u++]=i}return n}var i,a,s,f,c=r(t,5)+257,p=r(t,5)+1,l=r(t,4)+4,h=new(u?Uint8Array:Array)(d.length);for(f=0;l>f;++f)h[d[f]]=r(t,3);i=e(h),a=new(u?Uint8Array:Array)(c),s=new(u?Uint8Array:Array)(p),t.j(e(n.call(t,c,i,a)),e(n.call(t,p,i,s)))}var a=void 0,s=this,u="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,f=0,c=1;n.prototype.t=function(){for(;!this.l;){var t=r(this,3);switch(1&t&&(this.l=!0),t>>>=1){case 0:var e=this.input,n=this.d,o=this.b,s=this.a,p=a,l=a,h=a,d=o.length,y=a;if(this.c=this.f=0,p=e[n++],p===a)throw Error("invalid uncompressed block header: LEN (first byte)");if(l=p,p=e[n++],p===a)throw Error("invalid uncompressed block header: LEN (second byte)");if(l|=p<<8,p=e[n++],p===a)throw Error("invalid uncompressed block header: NLEN (first byte)");if(h=p,p=e[n++],p===a)throw Error("invalid uncompressed block header: NLEN (second byte)");if(h|=p<<8,l===~h)throw Error("invalid uncompressed block header: length verify");if(n+l>e.length)throw Error("input buffer is broken");switch(this.i){case f:for(;s+l>o.length;){if(y=d-s,l-=y,u)o.set(e.subarray(n,n+y),s),s+=y,n+=y;else for(;y--;)o[s++]=e[n++];this.a=s,o=this.e(),s=this.a}break;case c:for(;s+l>o.length;)o=this.e({o:2});break;default:throw Error("invalid inflate mode")}if(u)o.set(e.subarray(n,n+l),s),s+=l,n+=l;else for(;l--;)o[s++]=e[n++];this.d=n,this.a=s,this.b=o;break;case 1:this.j(x,U);break;case 2:i(this);break;default:throw Error("unknown BTYPE: "+t)}}return this.m()};var p,l,h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],d=u?new Uint16Array(h):h,y=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],w=u?new Uint16Array(y):y,g=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],v=u?new Uint8Array(g):g,m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],S=u?new Uint16Array(m):m,b=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=u?new Uint8Array(b):b,_=new(u?Uint8Array:Array)(288);for(p=0,l=_.length;l>p;++p)_[p]=143>=p?8:255>=p?9:279>=p?7:8;var I,F,x=e(_),A=new(u?Uint8Array:Array)(30);for(I=0,F=A.length;F>I;++I)A[I]=5;var U=e(A);n.prototype.j=function(t,e){var n=this.b,i=this.a;this.n=t;for(var a,s,u,f,c=n.length-258;256!==(a=o(this,t));)if(256>a)i>=c&&(this.a=i,n=this.e(),i=this.a),n[i++]=a;else for(s=a-257,f=w[s],0<v[s]&&(f+=r(this,v[s])),a=o(this,e),u=S[a],0<E[a]&&(u+=r(this,E[a])),i>=c&&(this.a=i,n=this.e(),i=this.a);f--;)n[i]=n[i++-u];for(;8<=this.c;)this.c-=8,this.d--;this.a=i},n.prototype.s=function(t,e){var n=this.b,i=this.a;this.n=t;for(var a,s,u,f,c=n.length;256!==(a=o(this,t));)if(256>a)i>=c&&(n=this.e(),c=n.length),n[i++]=a;else for(s=a-257,f=w[s],0<v[s]&&(f+=r(this,v[s])),a=o(this,e),u=S[a],0<E[a]&&(u+=r(this,E[a])),i+f>c&&(n=this.e(),c=n.length);f--;)n[i]=n[i++-u];for(;8<=this.c;)this.c-=8,this.d--;this.a=i},n.prototype.e=function(){var t,e,n=new(u?Uint8Array:Array)(this.a-32768),r=this.a-32768,o=this.b;if(u)n.set(o.subarray(32768,n.length));else for(t=0,e=n.length;e>t;++t)n[t]=o[t+32768];if(this.g.push(n),this.k+=n.length,u)o.set(o.subarray(r,r+32768));else for(t=0;32768>t;++t)o[t]=o[r+t];return this.a=32768,o},n.prototype.u=function(t){var e,n,r,o,i=0|this.input.length/this.d+1,a=this.input,s=this.b;return t&&("number"==typeof t.o&&(i=t.o),"number"==typeof t.q&&(i+=t.q)),2>i?(n=(a.length-this.d)/this.n[2],o=0|258*(n/2),r=o<s.length?s.length+o:s.length<<1):r=s.length*i,u?(e=new Uint8Array(r),e.set(s)):e=s,this.b=e},n.prototype.m=function(){var t,e,n,r,o,i=0,a=this.b,s=this.g,f=new(u?Uint8Array:Array)(this.k+(this.a-32768));if(0===s.length)return u?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);for(e=0,n=s.length;n>e;++e)for(t=s[e],r=0,o=t.length;o>r;++r)f[i++]=t[r];for(e=32768,n=this.a;n>e;++e)f[i++]=a[e];return this.g=[],this.buffer=f},n.prototype.r=function(){var t,e=this.a;return u?this.p?(t=new Uint8Array(e),t.set(this.b.subarray(0,e))):t=this.b.subarray(0,e):(this.b.length>e&&(this.b.length=e),t=this.b),this.buffer=t},t("Zlib.RawInflate",n),t("Zlib.RawInflate.prototype.decompress",n.prototype.t);var L,k,B,C,D={ADAPTIVE:c,BLOCK:f};if(Object.keys)L=Object.keys(D);else for(k in L=[],B=0,D)L[B++]=k;for(B=0,C=L.length;C>B;++B)k=L[B],t("Zlib.RawInflate.BufferType."+k,D[k])}.call(this),a("backend/../../vendor/zlib.js/rawinflate.min",function(){});var s=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};a("backend/zipfs",["require","exports","../core/buffer","../core/api_error","../generic/file_index","../core/browserfs","../core/node_fs_stats","../core/file_system","../core/file_flag","../core/buffer_core_arraybuffer","../generic/preload_file","../../vendor/zlib.js/rawinflate.min"],function(t,e,n,r,o,i,a,u,f,c,p){function l(t,e){var n=31&e,r=(15&e>>5)-1,o=(e>>9)+1980,i=31&t,a=63&t>>5,s=t>>11;return new Date(o,r,n,s,a,i)}function h(t,e,n,r){return 0===r?"":t.toString(e?"utf8":"extended_ascii",n,n+r)}var d=r.ApiError;r.ErrorCode,f.ActionType;var y=Zlib.RawInflate;!function(t){t[t.MSDOS=0]="MSDOS",t[t.AMIGA=1]="AMIGA",t[t.OPENVMS=2]="OPENVMS",t[t.UNIX=3]="UNIX",t[t.VM_CMS=4]="VM_CMS",t[t.ATARI_ST=5]="ATARI_ST",t[t.OS2_HPFS=6]="OS2_HPFS",t[t.MAC=7]="MAC",t[t.Z_SYSTEM=8]="Z_SYSTEM",t[t.CP_M=9]="CP_M",t[t.NTFS=10]="NTFS",t[t.MVS=11]="MVS",t[t.VSE=12]="VSE",t[t.ACORN_RISC=13]="ACORN_RISC",t[t.VFAT=14]="VFAT",t[t.ALT_MVS=15]="ALT_MVS",t[t.BEOS=16]="BEOS",t[t.TANDEM=17]="TANDEM",t[t.OS_400=18]="OS_400",t[t.OSX=19]="OSX"}(e.ExternalFileAttributeType||(e.ExternalFileAttributeType={})),e.ExternalFileAttributeType,function(t){t[t.STORED=0]="STORED",t[t.SHRUNK=1]="SHRUNK",t[t.REDUCED_1=2]="REDUCED_1",t[t.REDUCED_2=3]="REDUCED_2",t[t.REDUCED_3=4]="REDUCED_3",t[t.REDUCED_4=5]="REDUCED_4",t[t.IMPLODE=6]="IMPLODE",t[t.DEFLATE=8]="DEFLATE",t[t.DEFLATE64=9]="DEFLATE64",t[t.TERSE_OLD=10]="TERSE_OLD",t[t.BZIP2=12]="BZIP2",t[t.LZMA=14]="LZMA",t[t.TERSE_NEW=18]="TERSE_NEW",t[t.LZ77=19]="LZ77",t[t.WAVPACK=97]="WAVPACK",t[t.PPMD=98]="PPMD"}(e.CompressionMethod||(e.CompressionMethod={}));var w=e.CompressionMethod,g=function(){function t(t){if(this.data=t,67324752!==t.readUInt32LE(0))throw new d(9,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))}return t.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},t.prototype.flags=function(){return this.data.readUInt16LE(6)},t.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},t.prototype.lastModFileTime=function(){return l(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},t.prototype.crc32=function(){return this.data.readUInt32LE(14)},t.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},t.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},t.prototype.fileName=function(){return h(this.data,this.useUTF8(),30,this.fileNameLength())},t.prototype.extraField=function(){var t=30+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},t.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},t.prototype.useUTF8=function(){return 2048===(2048&this.flags())},t}();e.FileHeader=g;var v=function(){function t(t,e,n){this.header=t,this.record=e,this.data=n}return t.prototype.decompress=function(){var t=this.data,e=this.header.compressionMethod();switch(e){case 8:if(t.getBufferCore()instanceof c.BufferCoreArrayBuffer){var r=t.getBufferCore(),o=r.getDataView(),i=o.byteOffset+t.getOffset(),a=new Uint8Array(o.buffer).subarray(i,i+this.record.compressedSize()),s=new y(a).decompress();return new n.Buffer(new c.BufferCoreArrayBuffer(s.buffer),s.byteOffset,s.byteOffset+s.length)}var u=t.slice(0,this.record.compressedSize());return new n.Buffer(new y(u.toJSON().data).decompress());case 0:return t.sliceCopy(0,this.record.uncompressedSize());default:var f=w[e];throw f=f?f:"Unknown: "+e,new d(9,"Invalid compression method on file '"+this.header.fileName()+"': "+f)}},t}();e.FileData=v;var m=function(){function t(t){this.data=t}return t.prototype.crc32=function(){return this.data.readUInt32LE(0)},t.prototype.compressedSize=function(){return this.data.readUInt32LE(4)},t.prototype.uncompressedSize=function(){return this.data.readUInt32LE(8)},t}();e.DataDescriptor=m;var S=function(){function t(t){if(this.data=t,134630224!==this.data.readUInt32LE(0))throw new d(9,"Invalid archive extra data record signature: "+this.data.readUInt32LE(0))}return t.prototype.length=function(){return this.data.readUInt32LE(4)},t.prototype.extraFieldData=function(){return this.data.slice(8,8+this.length())},t}();e.ArchiveExtraDataRecord=S;var b=function(){function t(t){if(this.data=t,84233040!==this.data.readUInt32LE(0))throw new d(9,"Invalid digital signature signature: "+this.data.readUInt32LE(0))}return t.prototype.size=function(){return this.data.readUInt16LE(4)},t.prototype.signatureData=function(){return this.data.slice(6,6+this.size())},t}();e.DigitalSignature=b;var E=function(){function t(t,e){if(this.zipData=t,this.data=e,33639248!==this.data.readUInt32LE(0))throw new d(9,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0))}return t.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},t.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},t.prototype.flag=function(){return this.data.readUInt16LE(8)},t.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},t.prototype.lastModFileTime=function(){return l(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},t.prototype.crc32=function(){return this.data.readUInt32LE(16)},t.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},t.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},t.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},t.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},t.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},t.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},t.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},t.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},t.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},t.prototype.fileName=function(){var t=h(this.data,this.useUTF8(),46,this.fileNameLength());return t.replace(/\\/g,"/")},t.prototype.extraField=function(){var t=44+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},t.prototype.fileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return h(this.data,this.useUTF8(),t,this.fileCommentLength())},t.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},t.prototype.isDirectory=function(){var t=this.fileName();return(16&this.externalAttributes()?!0:!1)||"/"===t.charAt(t.length-1)},t.prototype.isFile=function(){return!this.isDirectory()},t.prototype.useUTF8=function(){return 2048===(2048&this.flag())},t.prototype.isEncrypted=function(){return 1===(1&this.flag())},t.prototype.getData=function(){var t=this.headerRelativeOffset(),e=new g(this.zipData.slice(t)),n=new v(e,this,this.zipData.slice(t+e.totalSize()));return n.decompress()},t.prototype.getStats=function(){return new a.Stats(32768,this.uncompressedSize(),420,new Date,this.lastModFileTime())},t}();e.CentralDirectory=E;var _=function(){function t(t){if(this.data=t,101010256!==this.data.readUInt32LE(0))throw new d(9,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))}return t.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},t.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},t.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},t.prototype.cdTotalEntryCount=function(){return this.data.readUInt16LE(10)},t.prototype.cdSize=function(){return this.data.readUInt32LE(12)},t.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},t.prototype.cdZipComment=function(){return h(this.data,!0,22,this.data.readUInt16LE(20))},t}();e.EndOfCentralDirectory=_;var I=function(t){function e(e,n){"undefined"==typeof n&&(n=""),t.call(this),this.data=e,this.name=n,this._index=new o.FileIndex,this.populateIndex()}return s(e,t),e.prototype.getName=function(){return"ZipFS"+(""!==this.name?" "+this.name:"")},e.isAvailable=function(){return!0},e.prototype.diskSpace=function(t,e){e(this.data.length,0)},e.prototype.isReadOnly=function(){return!0},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!0},e.prototype.statSync=function(t){var e=this._index.getInode(t);if(null===e)throw new d(1,""+t+" not found.");var n;return n=e.isFile()?e.getData().getStats():e.getStats()},e.prototype.openSync=function(t,e){var n=this._index.getInode(t);if(null===n)throw new d(1,""+t+" is not in the FileIndex.");if(n.isDir())throw new d(8,""+t+" is a directory.");var r=n.getData(),o=r.getStats();switch(e.pathExistsAction()){case 1:case 2:throw new d(6,""+t+" already exists.");case 0:return new p.NoSyncFile(this,t,e,o,r.getData());default:throw new d(9,"Invalid FileMode object.")}return null},e.prototype.readdirSync=function(t){var e=this._index.getInode(t);if(null===e)throw new d(1,""+t+" not found.");if(e.isFile())throw new d(7,""+t+" is a file, not a directory.");return e.getListing()},e.prototype.readFileSync=function(t,e,r){var o=this.openSync(t,r,420);try{var i=o,a=i._buffer;return null===e?a.length>0?a.sliceCopy():new n.Buffer(0):a.toString(e)}finally{o.closeSync()}},e.prototype.getEOCD=function(){for(var t=22,e=Math.min(t+65535,this.data.length-1),n=t;e>n;n++)if(101010256===this.data.readUInt32LE(this.data.length-n))return new _(this.data.slice(this.data.length-n));throw new d(9,"Invalid ZIP file: Could not locate End of Central Directory signature.")},e.prototype.populateIndex=function(){var t=this.getEOCD();if(t.diskNumber()!==t.cdDiskNumber())throw new d(9,"ZipFS does not support spanned zip files.");var e=t.cdOffset();if(4294967295===e)throw new d(9,"ZipFS does not support Zip64.");for(var n=e+t.cdSize();n>e;){var r=new E(this.data,this.data.slice(e));e+=r.totalSize();var i=r.fileName();if("/"===i.charAt(0))throw new Error("WHY IS THIS ABSOLUTE");"/"===i.charAt(i.length-1)&&(i=i.substr(0,i.length-1)),r.isDirectory()?this._index.addPath("/"+i,new o.DirInode):this._index.addPath("/"+i,new o.FileInode(r))}},e}(u.SynchronousFileSystem);e.ZipFS=I,i.registerFileSystem("ZipFS",I)}),a("generic/emscripten_fs",["require","exports","../core/browserfs","../core/node_fs","../core/buffer","../core/buffer_core_arraybuffer"],function(t,e,n,r,o,i){var a=o.Buffer,s=i.BufferCoreArrayBuffer,u=r.fs,f=function(){function t(t){this.fs=t}return t.prototype.open=function(t){var e=this.fs.realPath(t.node);try{FS.isFile(t.node.mode)&&(t.nfd=u.openSync(e,this.fs.flagsToPermissionString(t.flags)))}catch(n){if(!n.code)throw n;throw new FS.ErrnoError(ERRNO_CODES[n.code])}},t.prototype.close=function(t){try{FS.isFile(t.node.mode)&&t.nfd&&u.closeSync(t.nfd)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}},t.prototype.read=function(t,e,n,r,o){var i,f=new s(e.buffer),c=new a(f,e.byteOffset+n,e.byteOffset+n+r);try{i=u.readSync(t.nfd,c,0,r,o)}catch(p){throw new FS.ErrnoError(ERRNO_CODES[p.code])}return i},t.prototype.write=function(t,e,n,r,o){var i,f=new s(e.buffer),c=new a(f,e.byteOffset+n,e.byteOffset+n+r);try{i=u.writeSync(t.nfd,c,0,r,o)}catch(p){throw new FS.ErrnoError(ERRNO_CODES[p.code])}return i},t.prototype.llseek=function(t,e,n){var r=e;if(1===n)r+=t.position;else if(2===n&&FS.isFile(t.node.mode))try{var o=u.fstatSync(t.nfd);r+=o.size}catch(i){throw new FS.ErrnoError(ERRNO_CODES[i.code])}if(0>r)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return t.position=r,r},t}(),c=function(){function t(t){this.fs=t}return t.prototype.getattr=function(t){var e,n=this.fs.realPath(t);try{e=u.lstatSync(n)}catch(r){if(!r.code)throw r;throw new FS.ErrnoError(ERRNO_CODES[r.code])}return{dev:e.dev,ino:e.ino,mode:e.mode,nlink:e.nlink,uid:e.uid,gid:e.gid,rdev:e.rdev,size:e.size,atime:e.atime,mtime:e.mtime,ctime:e.ctime,blksize:e.blksize,blocks:e.blocks}},t.prototype.setattr=function(t,e){var n=this.fs.realPath(t);try{if(void 0!==e.mode&&(u.chmodSync(n,e.mode),t.mode=e.mode),void 0!==e.timestamp){var r=new Date(e.timestamp);u.utimesSync(n,r,r)}void 0!==e.size&&u.truncateSync(n,e.size)}catch(o){if(!o.code)throw o;throw new FS.ErrnoError(ERRNO_CODES[o.code])}},t.prototype.lookup=function(t,e){var n=PATH.join2(this.fs.realPath(t),e),r=this.fs.getMode(n);return this.fs.createNode(t,e,r)},t.prototype.mknod=function(t,e,n,r){var o=this.fs.createNode(t,e,n,r),i=this.fs.realPath(o);try{FS.isDir(o.mode)?u.mkdirSync(i,o.mode):u.writeFileSync(i,"",{mode:o.mode})}catch(a){if(!a.code)throw a;throw new FS.ErrnoError(ERRNO_CODES[a.code])}return o},t.prototype.rename=function(t,e,n){var r=this.fs.realPath(t),o=PATH.join2(this.fs.realPath(e),n);try{u.renameSync(r,o)}catch(i){if(!i.code)throw i;throw new FS.ErrnoError(ERRNO_CODES[i.code])}},t.prototype.unlink=function(t,e){var n=PATH.join2(this.fs.realPath(t),e);try{u.unlinkSync(n)}catch(r){if(!r.code)throw r;throw new FS.ErrnoError(ERRNO_CODES[r.code])}},t.prototype.rmdir=function(t,e){var n=PATH.join2(this.fs.realPath(t),e);try{u.rmdirSync(n)}catch(r){if(!r.code)throw r;throw new FS.ErrnoError(ERRNO_CODES[r.code])}},t.prototype.readdir=function(t){var e=this.fs.realPath(t);try{return u.readdirSync(e)}catch(n){if(!n.code)throw n;throw new FS.ErrnoError(ERRNO_CODES[n.code])}},t.prototype.symlink=function(t,e,n){var r=PATH.join2(this.fs.realPath(t),e);try{u.symlinkSync(n,r)}catch(o){if(!o.code)throw o;throw new FS.ErrnoError(ERRNO_CODES[o.code])}},t.prototype.readlink=function(t){var e=this.fs.realPath(t);try{return u.readlinkSync(e)}catch(n){if(!n.code)throw n;throw new FS.ErrnoError(ERRNO_CODES[n.code])}},t}(),p=function(){function t(){if(this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.node_ops=new c(this),this.stream_ops=new f(this),"undefined"==typeof n)throw new Error("BrowserFS is not loaded. Please load it before this library.")}return t.prototype.mount=function(t){return this.createNode(null,"/",this.getMode(t.opts.root),0)},t.prototype.createNode=function(t,e,n){if(!FS.isDir(n)&&!FS.isFile(n)&&!FS.isLink(n))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var r=FS.createNode(t,e,n);return r.node_ops=this.node_ops,r.stream_ops=this.stream_ops,r},t.prototype.getMode=function(t){var e;try{e=u.lstatSync(t)}catch(n){if(!n.code)throw n;throw new FS.ErrnoError(ERRNO_CODES[n.code])}return e.mode},t.prototype.realPath=function(t){for(var e=[];t.parent!==t;)e.push(t.name),t=t.parent;return e.push(t.mount.opts.root),e.reverse(),PATH.join.apply(null,e)},t.prototype.flagsToPermissionString=function(t){return t in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[t]:t},t}();e.BFSEmscriptenFS=p,n.EmscriptenFS=p}),window.BrowserFS=i("./core/browserfs"),i("./backend/localStorage"),i("./backend/dropbox"),i("./backend/html5fs"),i("./backend/in_memory"),i("./backend/mountable_file_system"),i("./backend/XmlHttpRequest"),i("./backend/zipfs"),i("./generic/emscripten_fs")}();
//# sourceMappingURL=browserfs.js.map